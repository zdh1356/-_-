<!DOCTYPE html>
<html class="wide wow-animation" lang="zh-CN">
  <head>
    <!-- Site Title-->
    <title>å›¾ä¹¦åˆ†ç±» - åè½©ä¹¦åº—</title>
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <!-- Stylesheets-->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:700%7CLato:300,400,300italic,700">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/fonts.css">
		<!--[if lt IE 10]>
    <div style="background: #212121; padding: 10px 0; box-shadow: 3px 3px 5px 0 rgba(0,0,0,.3); clear: both; text-align:center; position: relative; z-index:1;"><a href="http://windows.microsoft.com/en-US/internet-explorer/"><img src="images/ie8-panel/warning_bar_0000_us.jpg" border="0" height="42" width="820" alt="æ‚¨æ­£åœ¨ä½¿ç”¨è¿‡æ—¶çš„æµè§ˆå™¨ã€‚ä¸ºäº†è·å¾—æ›´å¿«æ›´å®‰å…¨çš„æµè§ˆä½“éªŒï¼Œè¯·å…è´¹å‡çº§ã€‚"></a></div>
    <script src="js/html5shiv.min.js"></script>
		<![endif]-->
  </head>
  <body>
    <!-- Page-->
    <div class="page">
      <!-- Page Header-->
      <header class="section page-header">
        <!-- RD Navbar-->
        <div class="rd-navbar-wrap rd-navbar-centered">
          <nav class="rd-navbar novi-background" data-layout="rd-navbar-fixed" data-sm-layout="rd-navbar-fixed" data-md-layout="rd-navbar-fixed" data-md-device-layout="rd-navbar-fixed" data-lg-layout="rd-navbar-fullwidth" data-lg-device-layout="rd-navbar-fixed" data-xl-layout="rd-navbar-static" data-xl-device-layout="rd-navbar-static" data-md-stick-up-offset="1px" data-lg-stick-up-offset="1px" data-stick-up="true" data-sm-stick-up="true" data-md-stick-up="true" data-lg-stick-up="true" data-xl-stick-up="true">
            <div class="rd-navbar-inner">
              <div class="rd-navbar-aside-left">
                <div class="rd-navbar-nav-wrap">
                  <!-- RD Navbar Nav-->
                  <ul class="rd-navbar-nav">
                    <li><a href="index.html">é¦–é¡µ</a></li>
                    <li class="active"><a href="#">å›¾ä¹¦åˆ†ç±»</a>
                      <!-- RD Navbar Dropdown-->
                      <ul class="rd-navbar-dropdown">
                        <li><a href="category.html?type=business">å•†ä¸šç®¡ç†</a></li>
                        <li><a href="category.html?type=technology">ç§‘æŠ€è®¡ç®—æœº</a></li>
                        <li><a href="category.html?type=literature">æ–‡å­¦è‰ºæœ¯</a></li>
                        <li><a href="category.html?type=education">æ•™è‚²è€ƒè¯•</a></li>
                        <li><a href="category.html?type=children">å°‘å„¿è¯»ç‰©</a></li>
                        <li><a href="category.html?type=life">ç”Ÿæ´»ä¼‘é—²</a></li>
                        <li><a href="category.html?type=social">ç¤¾ä¼šç§‘å­¦</a></li>
                      </ul>
                    </li>
                    <li><a href="recommendations.html">ä¸ºæ‚¨æ¨è</a></li>
                    <li><a href="forum.html">è¯»è€…è®ºå›</a></li>
                  </ul>
                </div>
              </div>
              <!-- RD Navbar Panel-->
              <div class="rd-navbar-panel">
                <button class="rd-navbar-toggle" data-rd-navbar-toggle=".rd-navbar-nav-wrap"><span></span></button>
                <!-- RD Navbar Brand-->
                <div class="rd-navbar-brand"><a class="brand-name" href="index.html"><img class="logo-default" src="images/logo-default-161x57.png" alt="åè½©ä¹¦åº—" width="161" height="57"/><img class="logo-inverse" src="images/logo-inverse-161x57.png" alt="åè½©ä¹¦åº—" width="161" height="57"/></a></div>
              </div>
              <div class="rd-navbar-collapse-toggle" data-rd-navbar-toggle=".rd-navbar-collapse"><span></span></div>
              <div class="rd-navbar-aside-right rd-navbar-collapse">
                <!-- RD Navbar Search-->
                <div class="rd-navbar-search"><a class="rd-navbar-search-toggle" data-rd-navbar-toggle=".rd-navbar-search" href="#"><span></span></a>
                  <form class="rd-search" action="search-results.html" data-search-live="rd-search-results-live" method="GET">
                    <div class="form-wrap">
                      <label class="form-label form-label" for="rd-navbar-search-form-input">æœç´¢å›¾ä¹¦...</label>
                      <input class="rd-navbar-search-form-input form-input" id="rd-navbar-search-form-input" type="text" name="keyword" autocomplete="off">
                      <div class="rd-search-results-live"></div>
                    </div>
                    <button class="rd-search-form-submit mdi mdi-magnify"></button>
                  </form>
                </div>
                <!-- User Menu -->
                <div class="rd-navbar-user">
                  <a href="login-page.html" class="user-icon" id="userMenu">
                    <i class="mdi mdi-account"></i>
                    <span id="userDisplayName">ç™»å½•</span>
                  </a>
                  <div class="user-dropdown" id="userDropdown" style="display: none;">
                    <a href="user-profile.html">ä¸ªäººèµ„æ–™</a>
                    <a href="order-history.html">æˆ‘çš„è®¢å•</a>
                    <a href="browsing-history.html">æµè§ˆå†å²</a>
                    <a href="user-preferences.html">åå¥½è®¾ç½®</a>
                    <a href="change-password.html">ä¿®æ”¹å¯†ç </a>
                    <a href="#" onclick="logout()">é€€å‡ºç™»å½•</a>
                  </div>
                </div>
                <!-- Shopping Cart -->
                <div class="rd-navbar-cart">
                  <a href="shopping-cart.html" class="cart-icon" id="cartIcon">
                    <i class="mdi mdi-cart"></i>
                    <span class="cart-count" id="cartCount">0</span>
                  </a>
                </div>
              </div>
            </div>
          </nav>
        </div>
      </header>
      <!-- Breadcrumbs-->
      <section class="breadcrumbs-custom" style="background-image: url(images/breadcrumbs-bg.jpg)">
        <div class="container">
          <p class="breadcrumbs-custom-subtitle">æµè§ˆå…¨éƒ¨å›¾ä¹¦</p>
          <p class="heading-1 breadcrumbs-custom-title">å›¾ä¹¦åˆ†ç±»</p>
          <ul class="breadcrumbs-custom-path">
            <li><a href="index.html">é¦–é¡µ</a></li>
            <li class="active">å›¾ä¹¦åˆ†ç±»</li>
          </ul>
        </div>
      </section>

      <!-- Book Catalog-->
      <section class="section section-lg bg-default">
        <div class="container">
          <div class="row row-70">
            <div class="col-lg-3">
              <!-- Book Categories-->
              <div class="aside-item">
                <h6>å›¾ä¹¦åˆ†ç±»</h6>
                <ul class="list-marked list-categories">
                  <li><a href="category.html?type=business">å•†ä¸šç®¡ç†</a></li>
                  <li><a href="category.html?type=technology">ç§‘æŠ€è®¡ç®—æœº</a></li>
                  <li><a href="category.html?type=literature" class="active">æ–‡å­¦è‰ºæœ¯</a></li>
                  <li><a href="category.html?type=education">æ•™è‚²è€ƒè¯•</a></li>
                  <li><a href="category.html?type=children">å°‘å„¿è¯»ç‰©</a></li>
                  <li><a href="category.html?type=life">ç”Ÿæ´»ä¼‘é—²</a></li>
                  <li><a href="category.html?type=social">ç¤¾ä¼šç§‘å­¦</a></li>
                </ul>
              </div>

              <!-- Filter by Publisher-->
              <div class="aside-item">
                <h6>å‡ºç‰ˆç¤¾</h6>
                <div class="group-xs group-middle">
                  <div class="checkbox-inline">
                    <label>
                      <input type="checkbox" name="publisher" value="äººæ°‘æ–‡å­¦å‡ºç‰ˆç¤¾">äººæ°‘æ–‡å­¦å‡ºç‰ˆç¤¾
                    </label>
                  </div>
                  <div class="checkbox-inline">
                    <label>
                      <input type="checkbox" name="publisher" value="æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾">æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾
                    </label>
                  </div>
                  <div class="checkbox-inline">
                    <label>
                      <input type="checkbox" name="publisher" value="ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾">ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾
                    </label>
                  </div>
                  <div class="checkbox-inline">
                    <label>
                      <input type="checkbox" name="publisher" value="äººæ°‘æ•™è‚²å‡ºç‰ˆç¤¾">äººæ°‘æ•™è‚²å‡ºç‰ˆç¤¾
                    </label>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-9">
              <div class="row row-30" id="booksContainer">
                <!-- å›¾ä¹¦å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
              </div>
              <!-- å›¾ä¹¦æ€»æ•°æ˜¾ç¤º -->
              <div class="text-center mt-4">
                <p class="text-muted" id="bookCount">æ­£åœ¨åŠ è½½å›¾ä¹¦...</p>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
    <!-- Global Mailform Output-->
    <div class="snackbars" id="form-output-global"></div>
    <!-- Javascript-->
    <script src="js/core.min.js"></script>
    <script src="js/script.js"></script>

    <!-- Category Page Styles -->
    <style>
      /* ç”¨æˆ·ä¸‹æ‹‰èœå•æ ·å¼ */
      .rd-navbar-user {
        position: relative;
      }

      .user-icon {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border-radius: 4px;
        color: #333;
        text-decoration: none;
        transition: background-color 0.3s ease;
        cursor: pointer;
      }

      .user-icon:hover {
        background-color: #f5f5f5;
        text-decoration: none;
        color: #333;
      }

      .user-dropdown {
        position: absolute;
        top: 100%;
        right: 0;
        background: white;
        border: 1px solid #ddd;
        border-radius: 4px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        min-width: 150px;
        z-index: 1000;
      }

      .user-dropdown a {
        display: block;
        padding: 10px 15px;
        color: #333;
        text-decoration: none;
        border-bottom: 1px solid #eee;
        transition: background-color 0.3s ease;
      }

      .user-dropdown a:hover {
        background-color: #f5f5f5;
        color: #007bff;
      }

      .user-dropdown a:last-child {
        border-bottom: none;
      }

      /* è´­ç‰©è½¦å’Œç”¨æˆ·å›¾æ ‡å¯¹é½è°ƒæ•´ */
      .rd-navbar-user,
      .rd-navbar-cart {
        display: flex;
        align-items: center;
      }

      .rd-navbar-cart .cart-icon {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border-radius: 4px;
        color: #333;
        text-decoration: none;
        transition: background-color 0.3s ease;
        position: relative;
      }

      .rd-navbar-cart .cart-icon:hover {
        background-color: #f5f5f5;
        text-decoration: none;
        color: #333;
      }

      .cart-count {
        background: #dc3545;
        color: white;
        border-radius: 50%;
        padding: 2px 6px;
        font-size: 12px;
        min-width: 18px;
        height: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        line-height: 1.2;
      }

      /* å›¾æ ‡å¤§å°è°ƒæ•´ */
      .rd-navbar-user .mdi,
      .rd-navbar-cart .mdi {
        font-size: 20px;
        line-height: 1;
      }

      /* äº§å“å¡ç‰‡æ ·å¼ */
      .product {
        border: 1px solid #eee;
        border-radius: 8px;
        overflow: hidden;
        transition: all 0.3s ease;
        height: 100%;
        display: flex;
        flex-direction: column;
      }

      .product:hover {
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        transform: translateY(-2px);
      }

      .product-image {
        position: relative;
        overflow: hidden;
      }

      .product-image img {
        width: 100%;
        height: 280px;
        object-fit: cover;
        transition: transform 0.3s ease;
      }

      .product:hover .product-image img {
        transform: scale(1.05);
      }

      .product-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.7);
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .product:hover .product-overlay {
        opacity: 1;
      }

      .product-actions {
        display: flex;
        gap: 15px;
      }

      .product-btn {
        width: 40px;
        height: 40px;
        background: white;
        color: #333;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        font-size: 18px;
        transition: all 0.3s ease;
        line-height: 1;
        vertical-align: middle;
      }

      .product-btn::before {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
      }

      .product-btn:hover {
        background: #007bff;
        color: white;
        transform: scale(1.1);
      }

      .product-title {
        padding: 20px;
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      .product-title h5 {
        margin-bottom: 8px;
        font-size: 16px;
        line-height: 1.4;
      }

      .product-title h5 a {
        color: #333;
        text-decoration: none;
      }

      .product-title h5 a:hover {
        color: #007bff;
      }

      .product-author {
        font-size: 13px;
        color: #666;
        margin-bottom: 4px;
      }

      .product-price {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-top: 15px;
        padding: 0 20px 20px 20px;
      }

      .product-price-old {
        font-size: 14px;
        color: #999;
        text-decoration: line-through;
      }

      .product-price-new {
        font-size: 18px;
        color: #e74c3c;
        font-weight: 600;
      }

      .product-stock {
        padding: 8px 20px;
        text-align: center;
        font-size: 13px;
        font-weight: 500;
      }

      .product-stock.in-stock {
        color: #28a745;
        background: rgba(40, 167, 69, 0.1);
        border-top: 1px solid rgba(40, 167, 69, 0.2);
      }

      .product-stock.out-of-stock {
        color: #dc3545;
        background: rgba(220, 53, 69, 0.1);
        border-top: 1px solid rgba(220, 53, 69, 0.2);
      }

      @media (max-width: 768px) {
        .product-actions {
          gap: 10px;
        }

        .product-btn {
          width: 35px;
          height: 35px;
          font-size: 16px;
        }
      }
    </style>

    <!-- Category specific scripts -->
    <script>
      // å›¾ä¹¦æ•°æ®åº“ï¼ˆä¸book-detail.htmlä¿æŒä¸€è‡´ï¼‰
      const booksDatabase = {
        1: {
          id: 1,
          title: 'é¢†å¯¼åŠ›çš„è‰ºæœ¯',
          author: 'çº¦ç¿°Â·éº¦å…‹æ–¯éŸ¦å°”',
          publisher: 'ä¸­ä¿¡å‡ºç‰ˆç¤¾',
          originalPrice: 45.00,
          price: 35.00,
          stock: 120,
          cover: 'images/book-02-188x246.jpg',
          category: 'business'
        },
        2: {
          id: 2,
          title: 'åˆ›æ–°æ€ç»´ä¸å•†ä¸šæ¨¡å¼',
          author: 'å…‹è±é¡¿Â·å…‹é‡Œæ–¯å¦æ£®',
          publisher: 'æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾',
          originalPrice: 52.00,
          price: 39.00,
          stock: 85,
          cover: 'images/book-03-188x246.jpg',
          category: 'business'
        },
        3: {
          id: 3,
          title: 'æ•°å­—åŒ–è½¬å‹æˆ˜ç•¥',
          author: 'è¿ˆå…‹å°”Â·éŸ¦å¾·',
          publisher: 'æ¸…åå¤§å­¦å‡ºç‰ˆç¤¾',
          originalPrice: 48.00,
          price: 36.00,
          stock: 95,
          cover: 'images/book-04-188x246.jpg',
          category: 'business'
        },
        4: {
          id: 4,
          title: 'Pythonç¼–ç¨‹ä»å…¥é—¨åˆ°å®è·µ',
          author: 'åŸƒé‡Œå…‹Â·é©¬ç‘Ÿæ–¯',
          publisher: 'äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾',
          originalPrice: 89.00,
          price: 69.00,
          stock: 150,
          cover: 'images/book-05-188x246.jpg',
          category: 'technology'
        },
        5: {
          id: 5,
          title: 'æ·±åº¦å­¦ä¹ ',
          author: 'ä¼Šæ©Â·å¤å¾·è´¹æ´›',
          publisher: 'äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾',
          originalPrice: 168.00,
          price: 128.00,
          stock: 75,
          cover: 'images/book-06-188x246.jpg',
          category: 'technology'
        },
        6: {
          id: 6,
          title: 'ç®—æ³•å¯¼è®º',
          author: 'æ‰˜é©¬æ–¯Â·ç§‘å°”æ›¼',
          publisher: 'æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾',
          originalPrice: 128.00,
          price: 98.00,
          stock: 60,
          cover: 'images/book-07-188x246.jpg',
          category: 'technology'
        },
        7: {
          id: 7,
          title: 'ç½‘é¡µè®¾è®¡ä¸å‰ç«¯å¼€å‘',
          author: 'å¼ ä¸‰',
          publisher: 'ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾',
          originalPrice: 78.00,
          price: 58.00,
          stock: 110,
          cover: 'images/book-08-188x246.jpg',
          category: 'technology'
        },
        8: {
          id: 8,
          title: 'ç™¾å¹´å­¤ç‹¬',
          author: 'åŠ è¥¿äºšÂ·é©¬å°”å…‹æ–¯',
          publisher: 'å—æµ·å‡ºç‰ˆå…¬å¸',
          originalPrice: 39.50,
          price: 29.00,
          stock: 88,
          cover: 'images/book-02-188x246.jpg',
          category: 'literature'
        },
        // æ–‡å­¦è‰ºæœ¯ç±»
        9: {
          id: 9,
          title: 'ç™¾å¹´å­¤ç‹¬',
          author: 'åŠ è¥¿äºšÂ·é©¬å°”å…‹æ–¯',
          publisher: 'å—æµ·å‡ºç‰ˆå…¬å¸',
          originalPrice: 45.00,
          price: 32.00,
          cover: 'images/book-02-188x246.jpg',
          category: 'literature'
        },
        10: {
          id: 10,
          title: 'æ´»ç€',
          author: 'ä½™å',
          publisher: 'ä½œå®¶å‡ºç‰ˆç¤¾',
          originalPrice: 28.00,
          price: 22.00,
          cover: 'images/book-03-188x246.jpg',
          category: 'literature'
        },
        11: {
          id: 11,
          title: 'è¯—ç»é€‰è¯»',
          author: 'å­”å­ç¼–',
          publisher: 'ä¸­åä¹¦å±€',
          originalPrice: 32.00,
          price: 25.00,
          cover: 'images/book-04-188x246.jpg',
          category: 'literature'
        },
        // æ•™è‚²è€ƒè¯•ç±»
        12: {
          id: 12,
          title: 'é«˜ç­‰æ•°å­¦',
          author: 'åŒæµå¤§å­¦æ•°å­¦ç³»',
          publisher: 'é«˜ç­‰æ•™è‚²å‡ºç‰ˆç¤¾',
          originalPrice: 58.00,
          price: 45.00,
          cover: 'images/book-05-188x246.jpg',
          category: 'education'
        },
        13: {
          id: 13,
          title: 'è‹±è¯­å››çº§çœŸé¢˜è¯¦è§£',
          author: 'ç‹é•¿å–œ',
          publisher: 'å¤–è¯­æ•™å­¦ä¸ç ”ç©¶å‡ºç‰ˆç¤¾',
          originalPrice: 42.00,
          price: 33.00,
          cover: 'images/book-06-188x246.jpg',
          category: 'education'
        },
        14: {
          id: 14,
          title: 'è€ƒç ”æ”¿æ²»æ ¸å¿ƒè€ƒç‚¹',
          author: 'è‚–ç§€è£',
          publisher: 'å›½å®¶è¡Œæ”¿å­¦é™¢å‡ºç‰ˆç¤¾',
          originalPrice: 48.00,
          price: 38.00,
          cover: 'images/book-07-188x246.jpg',
          category: 'education'
        },
        // å°‘å„¿è¯»ç‰©ç±»
        15: {
          id: 15,
          title: 'å°ç‹å­',
          author: 'å®‰æ‰˜ä¸‡Â·å¾·Â·åœ£åŸƒå…‹è‹ä½©é‡Œ',
          publisher: 'äººæ°‘æ–‡å­¦å‡ºç‰ˆç¤¾',
          originalPrice: 25.00,
          price: 18.00,
          cover: 'images/book-08-188x246.jpg',
          category: 'children'
        },
        16: {
          id: 16,
          title: 'å®‰å¾’ç”Ÿç«¥è¯é€‰é›†',
          author: 'æ±‰æ–¯Â·å…‹é‡Œæ–¯è’‚å®‰Â·å®‰å¾’ç”Ÿ',
          publisher: 'è¯‘æ—å‡ºç‰ˆç¤¾',
          originalPrice: 32.00,
          price: 24.00,
          cover: 'images/books/book-1.jpg',
          category: 'children'
        },
        17: {
          id: 17,
          title: 'åä¸‡ä¸ªä¸ºä»€ä¹ˆï¼ˆå°‘å„¿ç‰ˆï¼‰',
          author: 'å¶æ°¸çƒˆ',
          publisher: 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾',
          originalPrice: 38.00,
          price: 28.00,
          cover: 'images/book-02-188x246.jpg',
          category: 'children'
        },
        // ç”Ÿæ´»ä¼‘é—²ç±»
        18: {
          id: 18,
          title: 'ç¾é£Ÿåˆ¶ä½œå¤§å…¨',
          author: 'ç‹åˆš',
          publisher: 'ä¸­å›½è½»å·¥ä¸šå‡ºç‰ˆç¤¾',
          originalPrice: 48.00,
          price: 36.00,
          cover: 'images/book-03-188x246.jpg',
          category: 'life'
        },
        19: {
          id: 19,
          title: 'ç‘œä¼½å…¥é—¨æŒ‡å—',
          author: 'å¼ è•™å…°',
          publisher: 'äººæ°‘ä½“è‚²å‡ºç‰ˆç¤¾',
          originalPrice: 42.00,
          price: 32.00,
          cover: 'images/book-04-188x246.jpg',
          category: 'life'
        },
        20: {
          id: 20,
          title: 'å®¶å±…è£…ä¿®è®¾è®¡',
          author: 'æ¢å¿—å¤©',
          publisher: 'ä¸­å›½å»ºç­‘å·¥ä¸šå‡ºç‰ˆç¤¾',
          originalPrice: 68.00,
          price: 52.00,
          cover: 'images/book-05-188x246.jpg',
          category: 'life'
        },
        // ç¤¾ä¼šç§‘å­¦ç±»
        21: {
          id: 21,
          title: 'ç¤¾ä¼šå¿ƒç†å­¦',
          author: 'æˆ´ç»´Â·è¿ˆå°”æ–¯',
          publisher: 'äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾',
          originalPrice: 78.00,
          price: 58.00,
          cover: 'images/book-06-188x246.jpg',
          category: 'social'
        },
        22: {
          id: 22,
          title: 'ç»æµå­¦åŸç†',
          author: 'æ›¼æ˜†',
          publisher: 'åŒ—äº¬å¤§å­¦å‡ºç‰ˆç¤¾',
          originalPrice: 88.00,
          price: 68.00,
          cover: 'images/book-07-188x246.jpg',
          category: 'social'
        },
        23: {
          id: 23,
          title: 'æ³•ç†å­¦æ¦‚è®º',
          author: 'å¼ æ–‡æ˜¾',
          publisher: 'æ³•å¾‹å‡ºç‰ˆç¤¾',
          originalPrice: 56.00,
          price: 42.00,
          cover: 'images/book-08-188x246.jpg',
          category: 'social'
        }
      };

      // è·å–URLå‚æ•°ä¸­çš„åˆ†ç±»ä¿¡æ¯
      const urlParams = new URLSearchParams(window.location.search);
      const category = urlParams.get('type');

      // æ ¹æ®åˆ†ç±»åŠ è½½å¯¹åº”çš„å›¾ä¹¦
      async function loadBooks(filterCategory = null) {
        console.log('ğŸ“š å¼€å§‹åŠ è½½å›¾ä¹¦ï¼Œåˆ†ç±»:', filterCategory);

        const booksContainer = document.getElementById('booksContainer');
        const bookCountElement = document.getElementById('bookCount');

        // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        booksContainer.innerHTML = `
          <div class="col-12 text-center">
            <div class="loading-state">
              <div style="font-size: 48px; margin-bottom: 20px;">ğŸ“š</div>
              <h4>æ­£åœ¨åŠ è½½å›¾ä¹¦...</h4>
            </div>
          </div>
        `;
        bookCountElement.textContent = 'æ­£åœ¨åŠ è½½å›¾ä¹¦...';

        try {
          // åˆ†ç±»æ˜ å°„ï¼šå‰ç«¯ä»£ç  -> æ•°æ®åº“åˆ†ç±»åç§°
          const categoryMapping = {
            'business': 'å•†ä¸šç®¡ç†',
            'technology': 'è®¡ç®—æœºæŠ€æœ¯',
            'literature': 'æ–‡å­¦è‰ºæœ¯',
            'education': 'æ•™è‚²è€ƒè¯•',
            'children': 'å°‘å„¿è¯»ç‰©',
            'life': 'ç”Ÿæ´»ä¼‘é—²',
            'social': 'ç¤¾ä¼šç§‘å­¦'
          };

          // æ„å»ºAPIè¯·æ±‚URL
          let apiUrl = 'http://1.94.203.175:5000/api/book/';
          const params = new URLSearchParams();

          if (filterCategory) {
            // å°†å‰ç«¯åˆ†ç±»ä»£ç è½¬æ¢ä¸ºæ•°æ®åº“åˆ†ç±»åç§°
            const dbCategoryName = categoryMapping[filterCategory] || filterCategory;
            params.append('category', dbCategoryName);
            console.log('ğŸ”„ åˆ†ç±»æ˜ å°„:', filterCategory, '->', dbCategoryName);
          }

          if (params.toString()) {
            apiUrl += '?' + params.toString();
          }

          console.log('ğŸ“¡ è¯·æ±‚API:', apiUrl);

          const response = await fetch(apiUrl);

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }

          const result = await response.json();
          console.log('ğŸ“¦ APIå“åº”:', result);

          if (!result.success || !result.data || !result.data.books) {
            throw new Error('APIå“åº”æ ¼å¼é”™è¯¯');
          }

          const books = result.data.books;
          console.log('ğŸ“š è·å–åˆ°å›¾ä¹¦:', books.length, 'æœ¬');

          if (books.length === 0) {
            booksContainer.innerHTML = `
              <div class="col-12 text-center">
                <div class="empty-category">
                  <div style="font-size: 48px; margin-bottom: 20px;">ğŸ“š</div>
                  <h4>æš‚æ— å›¾ä¹¦</h4>
                  <p style="color: #666;">è¯¥åˆ†ç±»ä¸‹æš‚æ—¶æ²¡æœ‰å›¾ä¹¦ï¼Œè¯·æŸ¥çœ‹å…¶ä»–åˆ†ç±»ã€‚</p>
                </div>
              </div>
            `;
            bookCountElement.textContent = 'æš‚æ— å›¾ä¹¦';
            updatePageTitle(filterCategory, 0);
            return;
          }

          // æ›´æ–°å›¾ä¹¦åˆ—è¡¨
          booksContainer.innerHTML = books.map(book => {
            const currentPrice = book.currentPrice || book.current_price || 0;
            const originalPrice = book.originalPrice || book.original_price || currentPrice;
            const stockQuantity = book.stockQuantity || book.stock_quantity || 0;
            const coverImage = book.coverImageUrl || book.cover_image_url || 'images/default-book.svg';

            return `
              <div class="col-sm-6 col-md-4">
                <div class="product novi-background">
                  <div class="product-image">
                    <a href="book-detail.html?id=${book.id}"><img src="${coverImage}" alt="${book.title}" width="220" height="280" onerror="this.src='images/default-book.svg'"/></a>
                    <div class="product-overlay">
                      <div class="product-actions">
                        <a class="mdi mdi-cart product-btn" href="#" onclick="addToCart(${book.id})"></a>
                        <a class="mdi mdi-heart product-btn" href="#" onclick="addToFavorites(${book.id})"></a>
                      </div>
                    </div>
                  </div>
                  <div class="product-title">
                    <h5><a href="book-detail.html?id=${book.id}">${book.title}</a></h5>
                    <p class="product-author">${book.author} è‘—</p>
                  </div>
                  <div class="product-price">
                    <div class="product-price-old">ï¿¥${originalPrice.toFixed(2)}</div>
                    <div class="product-price-new">ï¿¥${currentPrice.toFixed(2)}</div>
                  </div>
                  <div class="product-stock ${stockQuantity > 0 ? 'in-stock' : 'out-of-stock'}">
                    ${stockQuantity > 0 ? `åº“å­˜ï¼š${stockQuantity}æœ¬` : 'æš‚æ—¶ç¼ºè´§'}
                  </div>
                </div>
              </div>
            `;
          }).join('');

          // æ›´æ–°é¡µé¢æ ‡é¢˜
          updatePageTitle(filterCategory, books.length);

          // æ›´æ–°å›¾ä¹¦è®¡æ•°
          bookCountElement.textContent = `å…±æ˜¾ç¤º ${books.length} æœ¬å›¾ä¹¦`;

        } catch (error) {
          console.error('âŒ åŠ è½½å›¾ä¹¦å¤±è´¥:', error);

          booksContainer.innerHTML = `
            <div class="col-12 text-center">
              <div class="error-state">
                <div style="font-size: 48px; margin-bottom: 20px;">âŒ</div>
                <h4>åŠ è½½å¤±è´¥</h4>
                <p style="color: #666;">æ— æ³•åŠ è½½å›¾ä¹¦æ•°æ®ï¼Œè¯·ç¨åé‡è¯•ã€‚</p>
                <button class="button button-primary" onclick="loadBooks('${filterCategory || ''}')">é‡æ–°åŠ è½½</button>
              </div>
            </div>
          `;
          bookCountElement.textContent = 'åŠ è½½å¤±è´¥';
          updatePageTitle(filterCategory, 0);
        }
      }

      // æ›´æ–°é¡µé¢æ ‡é¢˜
      function updatePageTitle(filterCategory, bookCount) {
        const categoryNames = {
          'business': 'å•†ä¸šç®¡ç†',
          'technology': 'ç§‘æŠ€è®¡ç®—æœº',
          'literature': 'æ–‡å­¦è‰ºæœ¯',
          'education': 'æ•™è‚²è€ƒè¯•',
          'children': 'å°‘å„¿è¯»ç‰©',
          'life': 'ç”Ÿæ´»ä¼‘é—²',
          'social': 'ç¤¾ä¼šç§‘å­¦'
        };

        const titleElement = document.querySelector('.breadcrumbs-custom-title');
        const subtitleElement = document.querySelector('.breadcrumbs-custom-subtitle');

        if (filterCategory && categoryNames[filterCategory]) {
          titleElement.textContent = categoryNames[filterCategory];
          subtitleElement.textContent = `å…±æ‰¾åˆ° ${bookCount} æœ¬å›¾ä¹¦`;
        } else {
          titleElement.textContent = 'å…¨éƒ¨å›¾ä¹¦';
          subtitleElement.textContent = `å…± ${bookCount} æœ¬å›¾ä¹¦`;
        }
      }

      // æ·»åŠ è´­ç‰©è½¦ï¼ˆçœŸå®åŠŸèƒ½ï¼‰
      async function addToCart(bookId) {
        console.log('ğŸ›’ æ·»åŠ åˆ°è´­ç‰©è½¦ï¼Œå›¾ä¹¦ID:', bookId);

        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        const authToken = localStorage.getItem('authToken') || localStorage.getItem('token');
        if (!authToken) {
          alert('è¯·å…ˆç™»å½•åå†æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦');
          window.location.href = 'login-page.html';
          return;
        }

        const output = document.getElementById('form-output-global');

        try {
          // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
          if (output) {
            output.innerHTML = '<div class="alert alert-info">æ­£åœ¨æ·»åŠ åˆ°è´­ç‰©è½¦...</div>';
            output.style.display = 'block';
          }

          const response = await fetch('http://1.94.203.175:5000/api/order/cart/add', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Authorization': `Bearer ${authToken}`
            },
            body: JSON.stringify({
              bookId: parseInt(bookId),
              quantity: 1
            })
          });

          if (response.ok) {
            const result = await response.json();
            console.log('âœ… æ·»åŠ åˆ°è´­ç‰©è½¦æˆåŠŸ:', result);

            if (output) {
              output.innerHTML = `<div class="alert alert-success">å›¾ä¹¦å·²æˆåŠŸæ·»åŠ åˆ°è´­ç‰©è½¦ï¼</div>`;
              setTimeout(() => {
                output.style.display = 'none';
              }, 3000);
            }

            // æ›´æ–°è´­ç‰©è½¦è®¡æ•°
            updateCartCount();
          } else {
            const errorResult = await response.json();
            console.error('âŒ æ·»åŠ åˆ°è´­ç‰©è½¦å¤±è´¥:', errorResult);

            if (output) {
              output.innerHTML = `<div class="alert alert-danger">æ·»åŠ å¤±è´¥: ${errorResult.message || 'è¯·ç¨åé‡è¯•'}</div>`;
              setTimeout(() => {
                output.style.display = 'none';
              }, 3000);
            }
          }
        } catch (error) {
          console.error('âŒ æ·»åŠ åˆ°è´­ç‰©è½¦æ—¶å‘ç”Ÿé”™è¯¯:', error);

          if (output) {
            output.innerHTML = `<div class="alert alert-danger">æ·»åŠ å¤±è´¥: ${error.message}</div>`;
            setTimeout(() => {
              output.style.display = 'none';
            }, 3000);
          }
        }
      }

      // æ·»åŠ æ”¶è—ï¼ˆç®€åŒ–ç‰ˆï¼‰
      function addToFavorites(bookId) {
        const book = booksDatabase[bookId];
        if (book) {
          const output = document.getElementById('form-output-global');
          output.innerHTML = `<div class="alert alert-success">ã€Š${book.title}ã€‹å·²æ·»åŠ åˆ°æ”¶è—ï¼</div>`;
          output.style.display = 'block';
          setTimeout(() => {
            output.style.display = 'none';
          }, 3000);
        }
      }

      // åˆ†ç±»ç­›é€‰
      document.querySelectorAll('.list-categories a').forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          // ç§»é™¤æ‰€æœ‰activeç±»
          document.querySelectorAll('.list-categories a').forEach(a => a.classList.remove('active'));
          // æ·»åŠ activeç±»åˆ°å½“å‰é“¾æ¥
          this.classList.add('active');

          // è·å–åˆ†ç±»
          const url = new URL(this.href);
          const categoryType = url.searchParams.get('type');

          // åŠ è½½å¯¹åº”åˆ†ç±»çš„å›¾ä¹¦
          loadBooks(categoryType);
        });
      });

      // åˆå§‹åŠ è½½
      if (category) {
        // å¦‚æœæœ‰åˆ†ç±»å‚æ•°ï¼ŒåŠ è½½å¯¹åº”åˆ†ç±»
        loadBooks(category);
        // æ›´æ–°ä¾§è¾¹æ activeçŠ¶æ€
        document.querySelectorAll('.list-categories a').forEach(link => {
          const url = new URL(link.href);
          if (url.searchParams.get('type') === category) {
            link.classList.add('active');
          } else {
            link.classList.remove('active');
          }
        });
      } else {
        // æ²¡æœ‰åˆ†ç±»å‚æ•°ï¼Œæ˜¾ç¤ºæ‰€æœ‰å›¾ä¹¦
        loadBooks();
      }

      // ç”¨æˆ·çŠ¶æ€ç®¡ç†
      function checkUserStatus() {
        console.log('ğŸ” æ£€æŸ¥ç”¨æˆ·çŠ¶æ€');

        const authToken = localStorage.getItem('authToken') || localStorage.getItem('token');
        const isLoggedIn = localStorage.getItem('isLoggedIn');
        const userInfoStr = localStorage.getItem('userInfo');
        const username = localStorage.getItem('username');

        console.log('ç™»å½•æ•°æ®:', { authToken: !!authToken, isLoggedIn, userInfoStr: !!userInfoStr, username });

        const userMenu = document.getElementById('userMenu');
        const userDisplayName = document.getElementById('userDisplayName');
        const userDropdown = document.getElementById('userDropdown');

        if (!userMenu || !userDisplayName) {
          console.error('âŒ ç”¨æˆ·èœå•å…ƒç´ æœªæ‰¾åˆ°');
          return;
        }

        let userInfo = {};
        if (userInfoStr) {
          try {
            userInfo = JSON.parse(userInfoStr);
          } catch (error) {
            console.error('âŒ è§£æç”¨æˆ·ä¿¡æ¯å¤±è´¥:', error);
          }
        }

        // æ£€æŸ¥æ˜¯å¦å·²ç™»å½•ï¼ˆç®€åŒ–æ£€æŸ¥é€»è¾‘ï¼‰
        const hasValidLogin = (
          (authToken && authToken !== 'null') &&
          (isLoggedIn === 'true') &&
          (userInfo.username || username)
        );

        console.log('ç™»å½•çŠ¶æ€è¯¦ç»†æ£€æŸ¥:');
        console.log('  authToken:', authToken);
        console.log('  authTokenæœ‰æ•ˆ:', authToken && authToken !== 'null');
        console.log('  isLoggedIn:', isLoggedIn);
        console.log('  isLoggedInä¸ºtrue:', isLoggedIn === 'true');
        console.log('  userInfo.username:', userInfo.username);
        console.log('  username:', username);
        console.log('  æœ‰ç”¨æˆ·å:', !!(userInfo.username || username));
        console.log('æœ€ç»ˆç™»å½•çŠ¶æ€åˆ¤æ–­:', hasValidLogin);

        if (hasValidLogin) {
          // ç”¨æˆ·å·²ç™»å½•
          const displayName = userInfo.username || username || 'ç”¨æˆ·';
          console.log('âœ… ç”¨æˆ·å·²ç™»å½•:', displayName);

          userDisplayName.textContent = displayName;
          userMenu.href = '#';

          // ä¸åœ¨è¿™é‡Œç»‘å®šäº‹ä»¶ï¼Œé¿å…ä¸addEventListenerå†²çª
          // äº‹ä»¶å¤„ç†ç”±DOMContentLoadedä¸­çš„addEventListenerç»Ÿä¸€ç®¡ç†
        } else {
          // å¤‡ç”¨æ£€æŸ¥ï¼šå¦‚æœä¸»è¦æ£€æŸ¥å¤±è´¥ï¼Œä½†æœ‰åŸºæœ¬çš„ç™»å½•æ•°æ®ï¼Œä»ç„¶æ˜¾ç¤ºä¸ºå·²ç™»å½•
          const hasBasicLogin = (authToken && authToken !== 'null') || (isLoggedIn === 'true');
          const fallbackUsername = userInfo.username || username || localStorage.getItem('username');

          if (hasBasicLogin && fallbackUsername) {
            console.log('âš ï¸ å¤‡ç”¨ç™»å½•æ£€æŸ¥é€šè¿‡ï¼Œæ˜¾ç¤ºç”¨æˆ·å:', fallbackUsername);
            userDisplayName.textContent = fallbackUsername;
            userMenu.href = '#';
          } else {
            // ç”¨æˆ·æœªç™»å½•
            console.log('âŒ ç”¨æˆ·æœªç™»å½•');
            userDisplayName.textContent = 'ç™»å½•';
            userMenu.href = 'login-page.html';

            if (userDropdown) {
              userDropdown.style.display = 'none';
            }
          }
        }
      }

      // é€€å‡ºç™»å½•å‡½æ•°
      function logout() {
        localStorage.removeItem('authToken');
        localStorage.removeItem('token');
        localStorage.removeItem('isLoggedIn');
        localStorage.removeItem('userInfo');
        localStorage.removeItem('username');
        localStorage.removeItem('userEmail');

        alert('å·²é€€å‡ºç™»å½•');
        checkUserStatus();
        window.location.href = 'login-page.html';
      }

      // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ç”¨æˆ·çŠ¶æ€å’Œè®¾ç½®ç”¨æˆ·èœå•äº¤äº’
      document.addEventListener('DOMContentLoaded', function() {
        checkUserStatus();

        // ç”¨æˆ·èœå•ç‚¹å‡»äº‹ä»¶
        const userMenu = document.getElementById('userMenu');
        const userDropdown = document.getElementById('userDropdown');

        if (userMenu && userDropdown) {
          userMenu.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();

            // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç™»å½•
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            const authToken = localStorage.getItem('authToken') || localStorage.getItem('token');

            if (isLoggedIn && authToken && authToken !== 'null') {
              // ç”¨æˆ·å·²ç™»å½•ï¼Œåˆ‡æ¢ä¸‹æ‹‰èœå•æ˜¾ç¤ºçŠ¶æ€
              console.log('ğŸ–±ï¸ ç”¨æˆ·èœå•è¢«ç‚¹å‡» - å·²ç™»å½•çŠ¶æ€');
              if (userDropdown.style.display === 'none' || userDropdown.style.display === '') {
                userDropdown.style.display = 'block';
                console.log('ğŸ“– æ˜¾ç¤ºç”¨æˆ·ä¸‹æ‹‰èœå•');
              } else {
                userDropdown.style.display = 'none';
                console.log('ğŸ“• éšè—ç”¨æˆ·ä¸‹æ‹‰èœå•');
              }
            } else {
              // ç”¨æˆ·æœªç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢
              console.log('ğŸ–±ï¸ ç”¨æˆ·èœå•è¢«ç‚¹å‡» - æœªç™»å½•çŠ¶æ€ï¼Œè·³è½¬ç™»å½•é¡µé¢');
              window.location.href = 'login-page.html';
            }
          });

          // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­ä¸‹æ‹‰èœå•
          document.addEventListener('click', function(e) {
            if (!userMenu.contains(e.target) && !userDropdown.contains(e.target)) {
              userDropdown.style.display = 'none';
            }
          });
        }
      });

      // å¦‚æœé¡µé¢å·²ç»åŠ è½½å®Œæˆï¼Œç«‹å³æ£€æŸ¥
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', checkUserStatus);
      } else {
        checkUserStatus();
      }

      // æ›´æ–°è´­ç‰©è½¦è®¡æ•°
      async function updateCartCount() {
        const authToken = localStorage.getItem('authToken') || localStorage.getItem('token');
        if (!authToken) {
          // æœªç™»å½•æ—¶æ˜¾ç¤º0
          const cartCount = document.getElementById('cartCount');
          if (cartCount) {
            cartCount.textContent = '0';
          }
          return;
        }

        try {
          const response = await fetch('http://1.94.203.175:5000/api/order/cart', {
            headers: {
              'Authorization': `Bearer ${authToken}`
            }
          });

          if (response.ok) {
            const result = await response.json();
            const cartCount = document.getElementById('cartCount');
            if (cartCount && result.data && result.data.items) {
              const totalItems = result.data.items.reduce((sum, item) => sum + item.quantity, 0);
              cartCount.textContent = totalItems;
              console.log('âœ… è´­ç‰©è½¦è®¡æ•°å·²æ›´æ–°:', totalItems);
            }
          } else {
            console.log('âš ï¸ è·å–è´­ç‰©è½¦æ•°æ®å¤±è´¥');
          }
        } catch (error) {
          console.error('âŒ æ›´æ–°è´­ç‰©è½¦è®¡æ•°å¤±è´¥:', error);
          // å‡ºé”™æ—¶ä¹Ÿæ˜¾ç¤º0
          const cartCount = document.getElementById('cartCount');
          if (cartCount) {
            cartCount.textContent = '0';
          }
        }
      }

      // é¡µé¢åŠ è½½æ—¶æ›´æ–°è´­ç‰©è½¦è®¡æ•°
      document.addEventListener('DOMContentLoaded', function() {
        updateCartCount();
      });

      // å»¶è¿Ÿæ£€æŸ¥ï¼Œç¡®ä¿æ‰€æœ‰æ•°æ®éƒ½å·²åŠ è½½
      setTimeout(checkUserStatus, 1000);
      setTimeout(checkUserStatus, 3000);
      setTimeout(updateCartCount, 2000);
      setTimeout(updateCartCount, 5000);
    </script>
  </body>
</html>