<!DOCTYPE html>
<html class="wide wow-animation" lang="zh"> 
  <head>
    <!-- Site Title-->
    <title>è®¢å•ç»“ç®— - ç½‘ä¸Šä¹¦åº—</title>
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <!-- Stylesheets-->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:700%7CLato:300,400,300italic,700">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/fonts.css">
    <!-- æ”¯ä»˜å®å’Œå¾®ä¿¡æ”¯ä»˜SDK -->
    <script src="https://gw.alipayobjects.com/as/g/h5-lib/alipayjsapi/3.1.1/alipayjsapi.min.js"></script>
    <script src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>

    <style>
      /* ç”¨æˆ·èœå•å’Œè´­ç‰©è½¦å›¾æ ‡æ ·å¼ */
      .rd-navbar-user,
      .rd-navbar-cart {
        position: relative;
        display: flex;
        align-items: center;
        margin-left: 20px;
      }

      .user-icon,
      .cart-icon {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border-radius: 4px;
        color: #333;
        text-decoration: none;
        transition: background-color 0.3s ease;
        position: relative;
      }

      .user-icon:hover,
      .cart-icon:hover {
        background-color: #f5f5f5;
        text-decoration: none;
        color: #333;
      }

      .user-dropdown {
        position: absolute;
        top: 100%;
        right: 0;
        background: white;
        border: 1px solid #ddd;
        border-radius: 4px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        min-width: 150px;
        z-index: 1000;
      }

      .user-dropdown a {
        display: block;
        padding: 10px 15px;
        color: #333;
        text-decoration: none;
        border-bottom: 1px solid #eee;
        transition: background-color 0.3s ease;
      }

      .user-dropdown a:hover {
        background-color: #f5f5f5;
        color: #007bff;
      }

      .user-dropdown a:last-child {
        border-bottom: none;
      }

      .cart-count {
        background: #dc3545;
        color: white;
        border-radius: 50%;
        padding: 2px 6px;
        font-size: 12px;
        font-weight: bold;
        min-width: 18px;
        text-align: center;
        line-height: 1.2;
      }

      /* å›¾æ ‡å¤§å°è°ƒæ•´ */
      .rd-navbar-user .mdi,
      .rd-navbar-cart .mdi {
        font-size: 20px;
        line-height: 1;
      }

      /* è®¢å•æ‘˜è¦æ ·å¼ä¼˜åŒ– */
      .table-cart {
        margin-bottom: 0;
      }

      .table-cart th {
        border-top: none;
        font-weight: 600;
        color: #495057;
      }

      .product-cart {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .product-cart-img img {
        border-radius: 4px;
        object-fit: cover;
      }

      .product-cart-info h6 {
        margin: 0 0 5px 0;
        font-weight: 600;
      }

      .product-cart-info p {
        margin: 0;
        font-size: 14px;
        color: #6c757d;
      }
    </style>
		<!--[if lt IE 10]>
    <div style="background: #212121; padding: 10px 0; box-shadow: 3px 3px 5px 0 rgba(0,0,0,.3); clear: both; text-align:center; position: relative; z-index:1;"><a href="http://windows.microsoft.com/en-US/internet-explorer/"><img src="images/ie8-panel/warning_bar_0000_us.jpg" border="0" height="42" width="820" alt="æ‚¨æ­£åœ¨ä½¿ç”¨è¿‡æ—¶çš„æµè§ˆå™¨ã€‚ä¸ºäº†è·å¾—æ›´å¿«æ›´å®‰å…¨çš„æµè§ˆä½“éªŒï¼Œè¯·å‡çº§æ‚¨çš„æµè§ˆå™¨ã€‚"></a></div>
    <script src="js/html5shiv.min.js"></script>
		<![endif]--> 
  </head>
  <body>
    <!-- Page preloader-->
    <div class="page-loader"> 
      <div class="page-loader-body"> 
        <div class="preloader-wrapper big active"> 
          <div class="spinner-layer spinner-primary">
            <div class="circle-clipper left">
              <div class="circle"></div>
            </div>
            <div class="gap-patch">
              <div class="circle"> </div>
            </div>
            <div class="circle-clipper right">
              <div class="circle"></div>
            </div>
          </div>
          <div class="spinner-layer spinner-primary">
            <div class="circle-clipper left">
              <div class="circle"></div>
            </div>
            <div class="gap-patch">
              <div class="circle"></div>
            </div>
            <div class="circle-clipper right">
              <div class="circle"></div>
            </div>
          </div>
          <div class="spinner-layer spinner-primary">
            <div class="circle-clipper left">
              <div class="circle"></div>
            </div>
            <div class="gap-patch">
              <div class="circle"></div>
            </div>
            <div class="circle-clipper right">
              <div class="circle"></div>
            </div>
          </div>
          <div class="spinner-layer spinner-primary">
            <div class="circle-clipper left">
              <div class="circle"></div>
            </div>
            <div class="gap-patch">
              <div class="circle"></div>
            </div>
            <div class="circle-clipper right">
              <div class="circle"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Page-->
    <div class="page">
      <!-- Page Header-->
      <header class="section page-header">
        <!-- RD Navbar-->
        <div class="rd-navbar-wrap rd-navbar-centered">
          <nav class="rd-navbar novi-background" data-layout="rd-navbar-fixed" data-sm-layout="rd-navbar-fixed" data-md-layout="rd-navbar-fixed" data-md-device-layout="rd-navbar-fixed" data-lg-layout="rd-navbar-fullwidth" data-lg-device-layout="rd-navbar-fixed" data-xl-layout="rd-navbar-static" data-xl-device-layout="rd-navbar-static" data-md-stick-up-offset="1px" data-lg-stick-up-offset="1px" data-stick-up="true" data-sm-stick-up="true" data-md-stick-up="true" data-lg-stick-up="true" data-xl-stick-up="true">
            <div class="rd-navbar-inner">
              <div class="rd-navbar-aside-left">
                <div class="rd-navbar-nav-wrap">
                  <!-- RD Navbar Nav-->
                  <ul class="rd-navbar-nav">
                    <li><a href="index.html">é¦–é¡µ</a></li>
                    <li><a href="category.html">å›¾ä¹¦åˆ†ç±»</a>
                      <!-- RD Navbar Dropdown-->
                      <ul class="rd-navbar-dropdown">
                        <li><a href="category.html?type=literature">æ–‡å­¦è‰ºæœ¯</a></li>
                        <li><a href="category.html?type=science">ç§‘å­¦æŠ€æœ¯</a></li>
                        <li><a href="category.html?type=education">æ•™è‚²å­¦ä¹ </a></li>
                        <li><a href="category.html?type=life">ç”Ÿæ´»ä¼‘é—²</a></li>
                      </ul>
                    </li>
                    <li><a href="shopping-cart.html">è´­ç‰©è½¦</a></li>
                    <li class="active"><a href="checkout.html">è®¢å•ç»“ç®—</a></li>
                  </ul>
                </div>
              </div>
              <!-- RD Navbar Panel-->
              <div class="rd-navbar-panel">
                <!-- RD Navbar Toggle-->
                <button class="rd-navbar-toggle" data-rd-navbar-toggle=".rd-navbar-nav-wrap"><span></span></button>
                <!-- RD Navbar Brand-->
                <div class="rd-navbar-brand"><a class="brand-name" href="index.html"><img class="logo-default" src="images/logo-default-161x57.png" alt="" width="161" height="57"/><img class="logo-inverse" src="images/logo-inverse-161x57.png" alt="" width="161" height="57"/></a></div>
              </div>
              <div class="rd-navbar-collapse-toggle" data-rd-navbar-toggle=".rd-navbar-collapse"><span></span></div>
              <div class="rd-navbar-aside-right rd-navbar-collapse">
                <!-- RD Navbar Search-->
                <div class="rd-navbar-search"><a class="rd-navbar-search-toggle" data-rd-navbar-toggle=".rd-navbar-search" href="#"><span></span></a>
                  <form class="rd-search" action="search-results.html" data-search-live="rd-search-results-live" method="GET">
                    <div class="form-wrap">
                      <label class="form-label form-label" for="rd-navbar-search-form-input">æœç´¢...</label>
                      <input class="rd-navbar-search-form-input form-input" id="rd-navbar-search-form-input" type="text" name="s" autocomplete="off"/>
                      <div class="rd-search-results-live"></div>
                    </div>
                    <button class="rd-search-form-submit mdi mdi-magnify"></button>
                  </form>
                </div>

                <!-- Shopping Cart -->
                <div class="rd-navbar-cart">
                  <a href="shopping-cart.html" class="cart-icon" id="cartIcon">
                    <i class="mdi mdi-cart"></i>
                    <span class="cart-count" id="cartCount">0</span>
                  </a>
                </div>

                <!-- User Menu -->
                <div class="rd-navbar-user">
                  <a href="login-page.html" class="user-icon" id="userMenu">
                    <i class="mdi mdi-account"></i>
                    <span id="userDisplayName">ç™»å½•</span>
                  </a>
                  <div class="user-dropdown" id="userDropdown" style="display: none;">
                    <a href="#" onclick="viewProfile()">ä¸ªäººèµ„æ–™</a>
                    <a href="#" onclick="viewOrders()">è®¢å•å†å²</a>
                    <a href="#" onclick="logout()">é€€å‡ºç™»å½•</a>
                  </div>
                </div>
              </div>
            </div>
          </nav>
        </div>
      </header>
      <!-- Breadcrumbs-->
      <section class="breadcrumbs-custom" style="background-image: url(images/breadcrumbs-bg.jpg)">
        <div class="container">
          <p class="breadcrumbs-custom-subtitle">è´­ç‰© </p>
          <p class="heading-1 breadcrumbs-custom-title">è®¢å•ç»“ç®—</p>
          <ul class="breadcrumbs-custom-path">
            <li><a href="index.html">é¦–é¡µ</a></li>
            <li><a href="#">å•†å“ç›®å½•</a></li>
            <li class="active">è®¢å•ç»“ç®—</li>
          </ul>
        </div>
      </section>
      <!-- Product Page-->
      <section class="section section-lg bg-default">
        <!-- section wave-->
        <div class="section-wave">
          <svg x="0px" y="0px" width="1920px" height="45px" viewbox="0 0 1920 45" preserveAspectRatio="none">
            <path d="M1920,0c-82.8,0-108.8,44.4-192,44.4c-78.8,0-116.5-43.7-192-43.7 c-77.1,0-115.9,44.4-192,44.4c-78.2,0-114.6-44.4-192-44.4c-78.4,0-115.3,44.4-192,44.4C883.1,45,841,0.6,768,0.6 C691,0.6,652.8,45,576,45C502.4,45,461.9,0.6,385,0.6C306.5,0.6,267.9,45,191,45C115.1,45,78,0.6,0,0.6V45h1920V0z"></path>
          </svg>
        </div>
        <div class="container container-wide">
          <div class="row row-fix row-50 justify-content-lg-center">
            <div class="col-lg-11 col-xl-10 col-xxl-6">
              <!-- è®¢å•æ‘˜è¦ -->
              <div class="card mb-4">
                <div class="card-header">
                  <h5 class="mb-0">è®¢å•æ‘˜è¦</h5>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table table-cart">
                      <thead>
                        <tr>
                          <th>å•†å“</th>
                          <th>å•ä»·</th>
                          <th>æ•°é‡</th>
                          <th>å°è®¡</th>
                        </tr>
                      </thead>
                      <tbody id="cart-items">
                        <!-- è´­ç‰©è½¦å•†å“å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                      </tbody>
                    </table>
                  </div>
                  <div class="row justify-content-end">
                    <div class="col-md-6">
                      <div class="card bg-light">
                        <div class="card-body">
                          <div class="d-flex justify-content-between mb-2">
                            <span>å•†å“æ€»é¢ï¼š</span>
                            <span id="subtotal">Â¥0.00</span>
                          </div>
                          <div class="d-flex justify-content-between mb-2">
                            <span>è¿è´¹ï¼š</span>
                            <span id="shipping">å…è¿è´¹</span>
                          </div>
                          <div class="d-flex justify-content-between mb-2">
                            <span>ä¼˜æƒ é‡‘é¢ï¼š</span>
                            <span id="discount">-Â¥0.00</span>
                          </div>
                          <hr>
                          <div class="d-flex justify-content-between">
                            <strong>åº”ä»˜æ€»é¢ï¼š</strong>
                            <strong id="total">Â¥0.00</strong>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- ç»“ç®—æ­¥éª¤ -->
              <div class="tabs-custom tabs-horizontal tabs-line text-center" id="tabs-1">
                <!-- æ”¯ä»˜æ–¹å¼ -->
                <div class="payment-section">
                  <h5 class="mb-4">é€‰æ‹©æ”¯ä»˜æ–¹å¼</h5>
                  <div class="form-group">
                    <div class="custom-control custom-radio mb-3">
                      <input type="radio" id="alipay" name="paymentMethod" class="custom-control-input" checked>
                      <label class="custom-control-label" for="alipay">
                        <img src="images/alipay-logo.png" alt="æ”¯ä»˜å®" height="24" onerror="this.style.display='none'">
                        æ”¯ä»˜å®
                      </label>
                    </div>
                    <div class="custom-control custom-radio mb-3">
                      <input type="radio" id="wechat" name="paymentMethod" class="custom-control-input">
                      <label class="custom-control-label" for="wechat">
                        <img src="images/wechat-pay-logo.png" alt="å¾®ä¿¡æ”¯ä»˜" height="24" onerror="this.style.display='none'">
                        å¾®ä¿¡æ”¯ä»˜
                      </label>
                    </div>
                    <div class="custom-control custom-radio mb-3">
                      <input type="radio" id="bankTransfer" name="paymentMethod" class="custom-control-input">
                      <label class="custom-control-label" for="bankTransfer">é“¶è¡Œè½¬è´¦</label>
                    </div>
                  </div>

                  <!-- ä¼˜æƒ åˆ¸ -->
                  <div class="coupon-section mt-4">
                    <h5 class="mb-3">ä½¿ç”¨ä¼˜æƒ åˆ¸</h5>
                    <div class="input-group">
                      <input type="text" class="form-input" id="couponCode" placeholder="è¯·è¾“å…¥ä¼˜æƒ ç ">
                      <div class="input-group-append">
                        <button class="button button-primary" type="button" onclick="applyCoupon()">ä½¿ç”¨</button>
                      </div>
                    </div>
                  </div>

                  <!-- é‚®ä»¶å‘é€è¯´æ˜ -->
                  <div class="email-notice mt-4">
                    <div class="alert alert-info">
                      <h6><i class="mdi mdi-email"></i> è®¢å•å‘é€æ–¹å¼</h6>
                      <p class="mb-0">è®¢å•ç¡®è®¤åï¼Œæˆ‘ä»¬å°†é€šè¿‡é‚®ä»¶å°†è´­ä¹°çš„å›¾ä¹¦è¯¦æƒ…å‘é€åˆ°æ‚¨çš„æ³¨å†Œé‚®ç®±ã€‚è¯·ç¡®ä¿æ‚¨çš„é‚®ç®±åœ°å€æ­£ç¡®ä¸”èƒ½æ­£å¸¸æ¥æ”¶é‚®ä»¶ã€‚</p>
                    </div>
                  </div>
                </div>

                <!-- æäº¤è®¢å•æŒ‰é’® -->
                <div class="row mt-4">
                  <div class="col-12">
                    <div class="form-button text-center">
                      <button class="button button-lg button-primary button-nina" onclick="submitOrder()">æäº¤è®¢å•</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- Footer Default-->
      <footer class="section page-footer page-footer-default novi-background bg-cover text-left footer-form bg-dark">
        <div class="container container-wide">
          <div class="row row-50 justify-content-sm-center">
            <div class="col-md-6 col-xl-3">
              <div class="inset-xxl">
                <h6 class="text-white">About us</h6>
                <p class="text-transparent text-spacing-sm">Booksmart is the worldwide textbook rental service created by readers for readers. We operate since 1999 and we offer lots of new and used textbooks on various topics including web design, development, business, and more.</p>
              </div>
            </div>
            <div class="col-md-6 col-xl-2">
              <h6 class="text-white">Quick links</h6>
              <ul class="list-marked list-marked-primary">
                <li><a href="about-us.html">About</a></li>
                <li><a href="#">Services</a></li>
                <li><a href="shop-4-columns-layout.html">Shop</a></li>
                <li><a href="classic-blog.html">Blog</a></li>
                <li><a href="grid-gallery-outside-title.html">Portfolio</a></li>
                <li><a href="contacts.html">Contacts</a></li>
              </ul>
            </div>
            <div class="col-md-6 col-xl-4">
              <h6 class="text-white">Gallery</h6>
              <div class="instafeed text-center" data-lightgallery="group">
                <div class="row row-10 row-narrow">
                  <div class="col-3">
                    <div class="thumbnail-instafeed thumbnail-instafeed-minimal"> <a class="instagram-link" data-lightgallery="item" href="images/footer-gallery-1-1200x800-original.jpg"><img src="images/footer-gallery-1-110x110.jpg" alt="" width="110" height="110"/>
                        <!--img.instagram-image(src='images/_blank.png', alt='', data-images-standard_resolution-url='src')--></a>
                      <div class="caption"> 
                        <ul class="list-inline">
                          <li><span class="icon novi-icon mdi mdi-plus">  </span></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="thumbnail-instafeed thumbnail-instafeed-minimal"> <a class="instagram-link" data-lightgallery="item" href="images/footer-gallery-2-1200x800-original.jpg"><img src="images/footer-gallery-2-110x110.jpg" alt="" width="110" height="110"/>
                        <!--img.instagram-image(src='images/_blank.png', alt='', data-images-standard_resolution-url='src')--></a>
                      <div class="caption"> 
                        <ul class="list-inline">
                          <li><span class="icon novi-icon mdi mdi-plus">  </span></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="thumbnail-instafeed thumbnail-instafeed-minimal"> <a class="instagram-link" data-lightgallery="item" href="images/footer-gallery-3-1200x800-original.jpg"><img src="images/footer-gallery-3-110x110.jpg" alt="" width="110" height="110"/>
                        <!--img.instagram-image(src='images/_blank.png', alt='', data-images-standard_resolution-url='src')--></a>
                      <div class="caption"> 
                        <ul class="list-inline">
                          <li><span class="icon novi-icon mdi mdi-plus">  </span></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="thumbnail-instafeed thumbnail-instafeed-minimal"> <a class="instagram-link" data-lightgallery="item" href="images/footer-gallery-4-1200x800-original.jpg"><img src="images/footer-gallery-4-110x110.jpg" alt="" width="110" height="110"/>
                        <!--img.instagram-image(src='images/_blank.png', alt='', data-images-standard_resolution-url='src')--></a>
                      <div class="caption"> 
                        <ul class="list-inline">
                          <li><span class="icon novi-icon mdi mdi-plus">  </span></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="thumbnail-instafeed thumbnail-instafeed-minimal"> <a class="instagram-link" data-lightgallery="item" href="images/footer-gallery-5-1200x800-original.jpg"><img src="images/footer-gallery-5-110x110.jpg" alt="" width="110" height="110"/>
                        <!--img.instagram-image(src='images/_blank.png', alt='', data-images-standard_resolution-url='src')--></a>
                      <div class="caption"> 
                        <ul class="list-inline">
                          <li><span class="icon novi-icon mdi mdi-plus">  </span></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="thumbnail-instafeed thumbnail-instafeed-minimal"> <a class="instagram-link" data-lightgallery="item" href="images/footer-gallery-6-1200x800-original.jpg"><img src="images/footer-gallery-6-110x110.jpg" alt="" width="110" height="110"/>
                        <!--img.instagram-image(src='images/_blank.png', alt='', data-images-standard_resolution-url='src')--></a>
                      <div class="caption"> 
                        <ul class="list-inline">
                          <li><span class="icon novi-icon mdi mdi-plus">  </span></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="thumbnail-instafeed thumbnail-instafeed-minimal"> <a class="instagram-link" data-lightgallery="item" href="images/footer-gallery-7-1200x800-original.jpg"><img src="images/footer-gallery-7-110x110.jpg" alt="" width="110" height="110"/>
                        <!--img.instagram-image(src='images/_blank.png', alt='', data-images-standard_resolution-url='src')--></a>
                      <div class="caption"> 
                        <ul class="list-inline">
                          <li><span class="icon novi-icon mdi mdi-plus">  </span></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="thumbnail-instafeed thumbnail-instafeed-minimal"> <a class="instagram-link" data-lightgallery="item" href="images/footer-gallery-8-1200x800-original.jpg"><img src="images/footer-gallery-8-110x110.jpg" alt="" width="110" height="110"/>
                        <!--img.instagram-image(src='images/_blank.png', alt='', data-images-standard_resolution-url='src')--></a>
                      <div class="caption"> 
                        <ul class="list-inline">
                          <li><span class="icon novi-icon mdi mdi-plus">  </span></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-6 col-xl-3">
              <h6 class="text-white">Newsletter</h6>
              <p class="text-transparent text-spacing-sm">Keep up with our always upcoming news, updates, and publications. Enter your e-mail and subscribe to our newsletter.</p>
              <form class="rd-mailform rd-mailform-inline rd-mailform-sm" data-form-output="form-output-global" data-form-type="subscribe" method="post" action="bat/rd-mailform.php">
                <div class="rd-mailform-inline-inner">
                  <div class="form-wrap custom-input">
                    <input class="form-input" type="email" name="email" data-constraints="@Email @Required" id="subscribe-form-email-0"/>
                    <label class="form-label" for="subscribe-form-email-0">Enter your e-mail</label>
                  </div>
                  <button class="button form-button button-xs button-primary button-nina" type="submit">Subscribe</button>
                </div>
              </form>
            </div>
          </div>
          <p class="rights"><span>&copy;&nbsp;</span><span class="copyright-year"></span><span>&nbsp;</span><span>.&nbsp;</span><span>All Rights Reserved</span><span>.&nbsp;</span><a href="privacy-policy.html">Privacy Policy</a>. <a target="_blank" href="https://www.mobanwang.com/" title="ç½‘ç«™æ¨¡æ¿">ç½‘ç«™æ¨¡æ¿</a></p>
        </div>
      </footer>
    </div>
    <!-- Global Mailform Output-->
    <div class="snackbars" id="form-output-global"></div>
    <!-- é“¶è¡Œè½¬è´¦ä¿¡æ¯æ¨¡æ€æ¡† -->
    <div class="modal fade" id="bankTransferModal" tabindex="-1" role="dialog" aria-labelledby="bankTransferModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="bankTransferModalLabel">é“¶è¡Œè½¬è´¦ä¿¡æ¯</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- å†…å®¹å°†ç”±JavaScriptåŠ¨æ€å¡«å…… -->
          </div>
          <div class="modal-footer">
            <button type="button" class="button button-primary" data-dismiss="modal">ç¡®å®š</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Toastæç¤ºç»„ä»¶ -->
    <div class="position-fixed bottom-0 right-0 p-3" style="z-index: 5; right: 0; bottom: 0;">
      <div id="toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-delay="3000">
        <div class="toast-header">
          <strong class="mr-auto">æç¤º</strong>
          <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="toast-body">
          <!-- æç¤ºå†…å®¹å°†ç”±JavaScriptåŠ¨æ€å¡«å…… -->
        </div>
      </div>
    </div>

    <!-- JavaScript -->
    <script src="js/core.min.js"></script>
    <script src="js/script.js"></script>
    <script src="js/checkout.js"></script>

    <script>
      // ç”¨æˆ·çŠ¶æ€æ£€æŸ¥ - ç»“ç®—é¡µé¢ä¸“ç”¨
      function checkUserStatus() {
        console.log('ğŸ” æ£€æŸ¥ç”¨æˆ·çŠ¶æ€ - ç»“è´¦é¡µé¢');

        const authToken = localStorage.getItem('authToken') || localStorage.getItem('token');
        const isLoggedIn = localStorage.getItem('isLoggedIn');
        const userInfoStr = localStorage.getItem('userInfo');
        const username = localStorage.getItem('username');

        console.log('ç™»å½•æ•°æ®:', {
          authToken: !!authToken,
          isLoggedIn,
          userInfoStr: !!userInfoStr,
          username,
          authTokenValue: authToken
        });

        const userMenu = document.getElementById('userMenu');
        const userDisplayName = document.getElementById('userDisplayName');
        const userDropdown = document.getElementById('userDropdown');

        if (!userMenu || !userDisplayName) {
          console.error('âŒ ç”¨æˆ·èœå•å…ƒç´ æœªæ‰¾åˆ°');
          return;
        }

        let userInfo = {};
        if (userInfoStr) {
          try {
            userInfo = JSON.parse(userInfoStr);
          } catch (error) {
            console.error('âŒ è§£æç”¨æˆ·ä¿¡æ¯å¤±è´¥:', error);
          }
        }

        // æ›´å®½æ¾çš„ç™»å½•æ£€æŸ¥ - åªè¦æœ‰tokenå°±è®¤ä¸ºå·²ç™»å½•
        const hasValidLogin = (
          (authToken && authToken !== 'null' && authToken !== 'undefined') ||
          (isLoggedIn === 'true') ||
          (userInfo.username || username)
        );

        console.log('ç™»å½•çŠ¶æ€è¯¦ç»†æ£€æŸ¥:');
        console.log('  authTokenå­˜åœ¨:', !!authToken);
        console.log('  authTokenæœ‰æ•ˆ:', authToken && authToken !== 'null' && authToken !== 'undefined');
        console.log('  isLoggedInä¸ºtrue:', isLoggedIn === 'true');
        console.log('  æœ‰ç”¨æˆ·å:', !!(userInfo.username || username));
        console.log('æœ€ç»ˆç™»å½•çŠ¶æ€åˆ¤æ–­:', hasValidLogin);

        if (hasValidLogin) {
          // ç”¨æˆ·å·²ç™»å½•
          const displayName = userInfo.username || username || 'ç”¨æˆ·';
          console.log('âœ… ç”¨æˆ·å·²ç™»å½•:', displayName);

          userDisplayName.textContent = displayName;
          userMenu.href = '#';

          // ç»‘å®šä¸‹æ‹‰èœå•äº‹ä»¶
          userMenu.onclick = function(e) {
            e.preventDefault();
            if (userDropdown) {
              const isHidden = userDropdown.style.display === 'none' || !userDropdown.style.display;
              userDropdown.style.display = isHidden ? 'block' : 'none';
            }
          };
        } else {
          // ç”¨æˆ·æœªç™»å½•
          console.log('âŒ ç”¨æˆ·æœªç™»å½•');
          userDisplayName.textContent = 'ç™»å½•';
          userMenu.href = 'login-page.html';
          userMenu.onclick = null;

          if (userDropdown) {
            userDropdown.style.display = 'none';
          }
        }
      }

      // åŠ è½½è´­ç‰©è½¦å•†å“æ•°æ®
      async function loadCheckoutItems() {
        console.log('ğŸ›’ å¼€å§‹åŠ è½½ç»“ç®—å•†å“æ•°æ®');

        // å…ˆæ˜¾ç¤ºæµ‹è¯•æ•°æ®ï¼Œç¡®ä¿é¡µé¢æœ‰å†…å®¹
        console.log('ğŸ§ª å…ˆæ˜¾ç¤ºæµ‹è¯•æ•°æ®');
        forceDisplayTestData();

        const urlParams = new URLSearchParams(window.location.search);
        const itemsParam = urlParams.get('items');

        console.log('ğŸ“‹ URLå‚æ•° items:', itemsParam);

        // å¦‚æœæ²¡æœ‰æŒ‡å®šå•†å“IDï¼Œç›´æ¥æ˜¾ç¤ºæµ‹è¯•æ•°æ®
        let selectedItemIds = [];
        if (itemsParam) {
          selectedItemIds = itemsParam.split(',').map(id => parseInt(id.trim()));
        } else {
          // ä»localStorageè·å–é€‰ä¸­çš„å•†å“
          const selectedItems = localStorage.getItem('selectedCartItems');
          if (selectedItems) {
            try {
              selectedItemIds = JSON.parse(selectedItems);
            } catch (error) {
              console.error('âŒ è§£æé€‰ä¸­å•†å“å¤±è´¥:', error);
            }
          }
        }

        console.log('ğŸ“¦ è¦ç»“ç®—çš„å•†å“ID:', selectedItemIds);

        const authToken = localStorage.getItem('authToken') || localStorage.getItem('token');
        if (!authToken) {
          console.log('âš ï¸ ç”¨æˆ·æœªç™»å½•ï¼Œç»§ç»­æ˜¾ç¤ºæµ‹è¯•æ•°æ®');
          return;
        }

        try {
          // è·å–è´­ç‰©è½¦æ•°æ®
          console.log('ğŸ“¡ è¯·æ±‚è´­ç‰©è½¦æ•°æ®...');
          const response = await fetch('http://1.94.203.175:5000/api/order/cart', {
            headers: {
              'Authorization': `Bearer ${authToken}`
            }
          });

          if (response.ok) {
            const result = await response.json();
            console.log('ğŸ“¦ è´­ç‰©è½¦APIå“åº”:', result);

            if (result.success && result.data && result.data.items && result.data.items.length > 0) {
              // è½¬æ¢æ•°æ®æ ¼å¼ä»¥åŒ¹é…å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
              const formattedItems = result.data.items.map(item => {
                const book = item.book || {};
                return {
                  id: item.id,
                  bookId: item.bookId || book.id,
                  title: book.title || 'æœªçŸ¥å›¾ä¹¦',
                  bookTitle: book.title || 'æœªçŸ¥å›¾ä¹¦',
                  author: book.author || 'æœªçŸ¥ä½œè€…',
                  publisher: book.publisher || 'æœªçŸ¥å‡ºç‰ˆç¤¾',
                  price: parseFloat(book.currentPrice || book.current_price || 0),
                  quantity: item.quantity || 1,
                  cover: book.coverImageUrl || book.cover_image_url || 'images/default-book.svg'
                };
              });

              console.log('ğŸ”„ è½¬æ¢åçš„å•†å“æ•°æ®:', formattedItems);

              // å¦‚æœæœ‰æŒ‡å®šçš„å•†å“IDï¼Œè¿‡æ»¤å‡ºé€‰ä¸­çš„å•†å“
              if (selectedItemIds.length > 0) {
                const selectedItems = formattedItems.filter(item => {
                  return selectedItemIds.includes(item.bookId);
                });

                console.log('âœ… è¿‡æ»¤åçš„é€‰ä¸­å•†å“:', selectedItems);

                if (selectedItems.length > 0) {
                  displayCheckoutItems(selectedItems);
                  return;
                } else {
                  console.log('âš ï¸ æ²¡æœ‰æ‰¾åˆ°é€‰ä¸­çš„å•†å“ï¼Œæ˜¾ç¤ºæ‰€æœ‰è´­ç‰©è½¦å•†å“');
                }
              }

              // æ˜¾ç¤ºæ‰€æœ‰è´­ç‰©è½¦å•†å“
              displayCheckoutItems(formattedItems);
              return;
            } else {
              console.log('âš ï¸ è´­ç‰©è½¦ä¸ºç©ºæˆ–APIå“åº”æ ¼å¼é”™è¯¯');
            }
          } else {
            console.log('âš ï¸ è·å–è´­ç‰©è½¦æ•°æ®å¤±è´¥ï¼ŒçŠ¶æ€ç :', response.status);
          }
        } catch (error) {
          console.log('âš ï¸ åŠ è½½è´­ç‰©è½¦æ•°æ®å¤±è´¥:', error);
        }
      }

      // æ˜¾ç¤ºç»“ç®—å•†å“
      function displayCheckoutItems(items) {
        console.log('ğŸ¨ å¼€å§‹æ˜¾ç¤ºç»“ç®—å•†å“:', items);

        const cartContainer = document.getElementById('cart-items');
        if (!cartContainer) {
          console.error('âŒ è´­ç‰©è½¦å®¹å™¨æœªæ‰¾åˆ°');
          return;
        }

        console.log('âœ… æ‰¾åˆ°è´­ç‰©è½¦å®¹å™¨:', cartContainer);

        if (!items || items.length === 0) {
          console.log('âš ï¸ æ²¡æœ‰å•†å“æ•°æ®');
          cartContainer.innerHTML = `
            <tr>
              <td colspan="4" style="text-align: center; padding: 50px;">
                <p>æ²¡æœ‰è¦ç»“ç®—çš„å•†å“</p>
                <a href="shopping-cart.html" class="button button-primary">è¿”å›è´­ç‰©è½¦</a>
              </td>
            </tr>
          `;
          return;
        }

        let subtotal = 0;

        const cartHTML = items.map((item, index) => {
          console.log(`ğŸ›ï¸ å¤„ç†å•†å“ ${index + 1}:`, item);

          const price = parseFloat(item.price) || 0;
          const quantity = parseInt(item.quantity) || 1;
          const itemTotal = price * quantity;
          subtotal += itemTotal;

          const title = item.bookTitle || item.title || 'æœªçŸ¥å›¾ä¹¦';
          const author = item.author || 'æœªçŸ¥ä½œè€…';
          const publisher = item.publisher || 'æœªçŸ¥å‡ºç‰ˆç¤¾';
          const cover = item.cover || 'images/default-book.svg';

          return `
            <tr>
              <td>
                <div class="product-cart">
                  <div class="product-cart-img">
                    <img src="${cover}" alt="${title}" width="60" height="75" onerror="this.src='images/default-book.svg'">
                  </div>
                  <div class="product-cart-info">
                    <h6>${title}</h6>
                    <p>ä½œè€…: ${author}</p>
                    <p>å‡ºç‰ˆç¤¾: ${publisher}</p>
                  </div>
                </div>
              </td>
              <td>ï¿¥${price.toFixed(2)}</td>
              <td>${quantity}</td>
              <td>ï¿¥${itemTotal.toFixed(2)}</td>
            </tr>
          `;
        }).join('');

        console.log('ğŸ“ ç”Ÿæˆçš„HTML:', cartHTML);
        cartContainer.innerHTML = cartHTML;
        console.log('âœ… HTMLå·²æ’å…¥åˆ°å®¹å™¨');

        // æ›´æ–°ä»·æ ¼æ˜¾ç¤º
        updatePriceDisplay(subtotal);
        console.log(`ğŸ’° æ€»ä»·: ï¿¥${subtotal.toFixed(2)}`);
      }

      // æ˜¾ç¤ºæµ‹è¯•æ•°æ®
      function displayTestCheckoutItems(selectedItemIds = [1]) {
        console.log('ğŸ§ª æ˜¾ç¤ºæµ‹è¯•æ•°æ®ï¼Œé€‰ä¸­çš„å•†å“ID:', selectedItemIds);

        // æ¨¡æ‹Ÿè´­ç‰©è½¦ä¸­çš„æ‰€æœ‰å•†å“
        const allTestItems = [
          {
            bookId: 1,
            title: 'ã€Šçº¢æ¥¼æ¢¦ã€‹',
            author: 'æ›¹é›ªèŠ¹',
            publisher: 'äººæ°‘æ–‡å­¦å‡ºç‰ˆç¤¾',
            price: 29.80,
            quantity: 2,
            cover: 'images/default-book.svg'
          },
          {
            bookId: 2,
            title: 'ã€Šè¥¿æ¸¸è®°ã€‹',
            author: 'å´æ‰¿æ©',
            publisher: 'ä¸­åä¹¦å±€',
            price: 35.60,
            quantity: 1,
            cover: 'images/default-book.svg'
          },
          {
            bookId: 3,
            title: 'ã€Šä¸‰å›½æ¼”ä¹‰ã€‹',
            author: 'ç½—è´¯ä¸­',
            publisher: 'å²³éº“ä¹¦ç¤¾',
            price: 42.00,
            quantity: 1,
            cover: 'images/default-book.svg'
          }
        ];

        // è¿‡æ»¤å‡ºé€‰ä¸­çš„å•†å“
        const selectedTestItems = allTestItems.filter(item =>
          selectedItemIds.includes(item.bookId)
        );

        console.log('ğŸ§ª è¿‡æ»¤åçš„æµ‹è¯•å•†å“:', selectedTestItems);

        if (selectedTestItems.length > 0) {
          displayCheckoutItems(selectedTestItems);
        } else {
          // å¦‚æœæ²¡æœ‰åŒ¹é…çš„å•†å“ï¼Œæ˜¾ç¤ºç¬¬ä¸€ä¸ªä½œä¸ºé»˜è®¤
          displayCheckoutItems([allTestItems[0]]);
        }
      }

      // æ›´æ–°ä»·æ ¼æ˜¾ç¤º
      function updatePriceDisplay(subtotal) {
        const subtotalElement = document.getElementById('subtotal');
        const totalElement = document.getElementById('total');

        if (subtotalElement) {
          subtotalElement.textContent = `Â¥${subtotal.toFixed(2)}`;
        }
        if (totalElement) {
          totalElement.textContent = `Â¥${subtotal.toFixed(2)}`;
        }
      }

      // ç”¨æˆ·åŠŸèƒ½
      function viewProfile() {
        alert('ä¸ªäººèµ„æ–™åŠŸèƒ½å¼€å‘ä¸­...');
      }

      function viewOrders() {
        alert('è®¢å•å†å²åŠŸèƒ½å¼€å‘ä¸­...');
      }

      function logout() {
        if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
          localStorage.removeItem('authToken');
          localStorage.removeItem('token');
          localStorage.removeItem('userInfo');
          localStorage.removeItem('isLoggedIn');
          window.location.href = 'login-page.html';
        }
      }

      // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ
      document.addEventListener('DOMContentLoaded', function() {
        console.log('ğŸ“„ checkouté¡µé¢DOMåŠ è½½å®Œæˆ');

        checkUserStatus();

        // å»¶è¿ŸåŠ è½½å•†å“æ•°æ®ï¼Œç¡®ä¿é¡µé¢å®Œå…¨åŠ è½½
        setTimeout(() => {
          console.log('ğŸ”„ å¼€å§‹åŠ è½½å•†å“æ•°æ®');
          loadCheckoutItems();
        }, 1000);

        // å¦‚æœ3ç§’åè¿˜æ²¡æœ‰æ•°æ®ï¼Œå¼ºåˆ¶æ˜¾ç¤ºæµ‹è¯•æ•°æ®
        setTimeout(() => {
          const cartContainer = document.getElementById('cart-items');
          if (cartContainer && cartContainer.innerHTML.trim() === '<!-- è´­ç‰©è½¦å•†å“å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->') {
            console.log('âš ï¸ 3ç§’åä»æ— æ•°æ®ï¼Œå¼ºåˆ¶æ˜¾ç¤ºæµ‹è¯•æ•°æ®');
            forceDisplayTestData();
          }
        }, 3000);

        // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­ä¸‹æ‹‰èœå•
        document.addEventListener('click', function(e) {
          const userMenu = document.getElementById('userMenu');
          const userDropdown = document.getElementById('userDropdown');
          if (userMenu && userDropdown && !userMenu.contains(e.target) && !userDropdown.contains(e.target)) {
            userDropdown.style.display = 'none';
          }
        });
      });

      // æäº¤è®¢å•
      async function submitOrder() {
        console.log('ğŸ“ å¼€å§‹æäº¤è®¢å•');

        const authToken = localStorage.getItem('authToken') || localStorage.getItem('token');
        if (!authToken) {
          alert('è¯·å…ˆç™»å½•');
          window.location.href = 'login-page.html';
          return;
        }

        // è·å–æ”¯ä»˜æ–¹å¼å’Œä¼˜æƒ åˆ¸
        const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked')?.id || 'alipay';
        const couponCode = document.getElementById('couponCode')?.value?.trim() || '';

        console.log('ğŸ’³ æ”¯ä»˜æ–¹å¼:', paymentMethod);
        console.log('ğŸ« ä¼˜æƒ åˆ¸:', couponCode);

        // è·å–å½“å‰è´­ç‰©è½¦å•†å“
        let orderItems = [];
        try {
          // ä»åç«¯è·å–æœ€æ–°çš„è´­ç‰©è½¦æ•°æ®
          const cartResponse = await fetch('http://1.94.203.175:5000/api/order/cart', {
            headers: {
              'Authorization': `Bearer ${authToken}`
            }
          });

          if (cartResponse.ok) {
            const cartResult = await cartResponse.json();
            if (cartResult.success && cartResult.data && cartResult.data.items) {
              orderItems = cartResult.data.items.map(item => ({
                bookId: item.bookId,
                quantity: item.quantity
              }));
            }
          }

          if (orderItems.length === 0) {
            alert('è´­ç‰©è½¦ä¸ºç©ºï¼Œæ— æ³•æäº¤è®¢å•');
            return;
          }

          console.log('ğŸ“¦ è®¢å•å•†å“:', orderItems);

          // æäº¤è®¢å• - é€šè¿‡é‚®ä»¶å‘é€
          const orderData = {
            items: orderItems,
            paymentMethod: paymentMethod,
            couponCode: couponCode,
            deliveryMethod: 'email', // æ ‡è®°ä¸ºé‚®ä»¶å‘é€
            notes: 'è®¢å•å°†é€šè¿‡é‚®ä»¶å‘é€åˆ°ç”¨æˆ·é‚®ç®±'
          };

          console.log('ğŸ“¤ æäº¤è®¢å•æ•°æ®:', orderData);

          const response = await fetch('http://1.94.203.175:5000/api/order/', {
            method: 'POST',
            headers: {
              'Authorization': `Bearer ${authToken}`,
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(orderData)
          });

          if (response.ok) {
            const result = await response.json();
            console.log('âœ… è®¢å•æäº¤æˆåŠŸ:', result);

            if (result.success) {
              // å­˜å‚¨è®¢å•ä¿¡æ¯ç”¨äºæˆåŠŸé¡µé¢æ˜¾ç¤º
              localStorage.setItem('lastOrderNumber', result.data.orderNumber);
              localStorage.setItem('lastOrderAmount', result.data.totalAmount);

              // æ¸…ç©ºè´­ç‰©è½¦
              await clearCart();

              // æ˜¾ç¤ºæˆåŠŸæç¤ºå¹¶è·³è½¬
              alert('ğŸ‰ è®¢å•æäº¤æˆåŠŸï¼\n\nğŸ“§ å›¾ä¹¦è¯¦æƒ…å·²å‘é€åˆ°æ‚¨çš„é‚®ç®±\nğŸ“š è¯·æŸ¥æ”¶é‚®ä»¶è·å–æ‚¨è´­ä¹°çš„å›¾ä¹¦ä¿¡æ¯\nğŸ’¾ å»ºè®®ä¿å­˜é‚®ä»¶ä»¥ä¾¿éšæ—¶æŸ¥çœ‹');

              // è·³è½¬åˆ°é¦–é¡µ
              window.location.href = 'index.html';
            } else {
              alert('è®¢å•æäº¤å¤±è´¥ï¼š' + result.message);
            }
          } else {
            const errorText = await response.text();
            console.error('âŒ è®¢å•æäº¤å¤±è´¥:', errorText);
            alert('è®¢å•æäº¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
          }

        } catch (error) {
          console.error('âŒ æäº¤è®¢å•æ—¶å‘ç”Ÿé”™è¯¯:', error);
          alert('æäº¤è®¢å•æ—¶å‘ç”Ÿé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•');
        }
      }

      // æ¸…ç©ºè´­ç‰©è½¦
      async function clearCart() {
        const authToken = localStorage.getItem('authToken') || localStorage.getItem('token');
        if (!authToken) return;

        try {
          await fetch('http://1.94.203.175:5000/api/order/cart/clear', {
            method: 'DELETE',
            headers: {
              'Authorization': `Bearer ${authToken}`
            }
          });
        } catch (error) {
          console.error('æ¸…ç©ºè´­ç‰©è½¦å¤±è´¥:', error);
        }
      }

      // å¼ºåˆ¶æ˜¾ç¤ºæµ‹è¯•æ•°æ®
      function forceDisplayTestData() {
        console.log('ğŸš¨ å¼ºåˆ¶æ˜¾ç¤ºæµ‹è¯•æ•°æ®');
        const testItems = [
          {
            bookId: 1,
            title: 'ã€Šçº¢æ¥¼æ¢¦ã€‹',
            bookTitle: 'ã€Šçº¢æ¥¼æ¢¦ã€‹',
            author: 'æ›¹é›ªèŠ¹',
            publisher: 'äººæ°‘æ–‡å­¦å‡ºç‰ˆç¤¾',
            price: 29.80,
            quantity: 2,
            cover: 'images/default-book.svg'
          },
          {
            bookId: 2,
            title: 'ã€Šè¥¿æ¸¸è®°ã€‹',
            bookTitle: 'ã€Šè¥¿æ¸¸è®°ã€‹',
            author: 'å´æ‰¿æ©',
            publisher: 'ä¸­åä¹¦å±€',
            price: 35.60,
            quantity: 1,
            cover: 'images/default-book.svg'
          }
        ];

        console.log('ğŸ§ª å¼ºåˆ¶æ˜¾ç¤ºçš„æµ‹è¯•å•†å“:', testItems);
        displayCheckoutItems(testItems);
      }
    </script>
  </body>
</html>