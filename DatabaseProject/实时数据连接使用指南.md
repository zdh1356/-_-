# åè½©ä¹¦åº—å®æ—¶æ•°æ®è¿æ¥ä½¿ç”¨æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

è¿™å¥—å®æ—¶æ•°æ®è¿æ¥ç³»ç»Ÿå°†ä½ çš„å‰ç«¯é¡¹ç›®ä»localStorageæ¨¡å¼å‡çº§ä¸ºçœŸæ­£çš„æ•°æ®åº“å®æ—¶è¿æ¥æ¨¡å¼ï¼Œæ”¯æŒç”¨æˆ·ç™»å½•ã€å•†å“ä¿¡æ¯ã€è®¢è´­ä¿¡æ¯ç­‰æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½çš„å®æ—¶åŒæ­¥ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¼•å…¥å¿…è¦æ–‡ä»¶

åœ¨ä½ çš„HTMLé¡µé¢ä¸­æ·»åŠ ä»¥ä¸‹å¼•ç”¨ï¼š

```html
<!-- åœ¨ </head> æ ‡ç­¾å‰æ·»åŠ  -->
<link rel="stylesheet" href="css/realtime-ui.css">

<!-- åœ¨ </body> æ ‡ç­¾å‰æ·»åŠ  -->
<script src="js/realtime-data-manager.js"></script>
<script src="js/page-adapters.js"></script>
```

### 2. åŸºç¡€é…ç½®

ç³»ç»Ÿä¼šè‡ªåŠ¨åˆå§‹åŒ–ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚é»˜è®¤APIåœ°å€ä¸º `/api`ï¼Œå¦‚éœ€ä¿®æ”¹ï¼š

```javascript
// åœ¨é¡µé¢åŠ è½½å‰è®¾ç½®
window.API_BASE_URL = 'http://your-api-server.com/api';
```

## ğŸ“Š æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### ğŸ” ç”¨æˆ·è®¤è¯æ¨¡å—

#### ç™»å½•åŠŸèƒ½
```javascript
// è‡ªåŠ¨é€‚é…ç°æœ‰ç™»å½•è¡¨å•
// è¡¨å•ID: loginForm
// é‚®ç®±å­—æ®µID: forms-login-email
// å¯†ç å­—æ®µID: forms-login-password

// æ‰‹åŠ¨è°ƒç”¨ç™»å½•
const result = await dataManager.login(email, password, remember);
if (result.success) {
    console.log('ç™»å½•æˆåŠŸ:', result.user);
} else {
    console.log('ç™»å½•å¤±è´¥:', result.error);
}
```

#### æ³¨å†ŒåŠŸèƒ½
```javascript
// è‡ªåŠ¨é€‚é…ç°æœ‰æ³¨å†Œè¡¨å•
// è¡¨å•ID: registerForm

// æ‰‹åŠ¨è°ƒç”¨æ³¨å†Œ
const userData = {
    username: 'testuser',
    email: 'test@example.com',
    password: 'password123',
    phone: '13800138000'
};
const result = await dataManager.register(userData);
```

#### ä¿®æ”¹å¯†ç 
```javascript
// è‡ªåŠ¨é€‚é…ç°æœ‰ä¿®æ”¹å¯†ç è¡¨å•
// è¡¨å•ID: changePasswordForm

// æ‰‹åŠ¨è°ƒç”¨ä¿®æ”¹å¯†ç 
const result = await dataManager.changePassword(currentPassword, newPassword);
```

### ğŸ‘¤ ç”¨æˆ·ä¿¡æ¯æ¨¡å—

#### è·å–ç”¨æˆ·ä¿¡æ¯
```javascript
// è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ï¼ˆå¸¦ç¼“å­˜ï¼‰
const userInfo = await dataManager.getUserInfo();

// å¼ºåˆ¶åˆ·æ–°ç”¨æˆ·ä¿¡æ¯
const userInfo = await dataManager.getUserInfo(true);
```

#### æ›´æ–°ç”¨æˆ·ä¿¡æ¯
```javascript
const userData = {
    username: 'newusername',
    phone: '13900139000',
    realName: 'å¼ ä¸‰',
    address: 'åŒ—äº¬å¸‚æœé˜³åŒºxxx'
};
const result = await dataManager.updateUserInfo(userData);
```

#### ç”¨æˆ·åå¥½è®¾ç½®
```javascript
// è·å–ç”¨æˆ·åå¥½
const preferences = await dataManager.getUserPreferences();

// æ›´æ–°ç”¨æˆ·åå¥½
const newPreferences = {
    preferredCategories: ['literature', 'business'],
    notificationSettings: {
        newBooks: true,
        orders: true,
        promotions: false
    }
};
const result = await dataManager.updateUserPreferences(newPreferences);
```

### ğŸ“š å•†å“ä¿¡æ¯æ¨¡å—

#### è·å–å›¾ä¹¦åˆ—è¡¨
```javascript
// è·å–å›¾ä¹¦åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µï¼‰
const params = {
    page: 1,
    limit: 12,
    category: 'business'
};
const result = await dataManager.getBooks(params);
console.log('å›¾ä¹¦åˆ—è¡¨:', result.books);
console.log('åˆ†é¡µä¿¡æ¯:', result.pagination);
```

#### è·å–å›¾ä¹¦è¯¦æƒ…
```javascript
// è·å–å›¾ä¹¦è¯¦æƒ…ï¼ˆè‡ªåŠ¨è®°å½•æµè§ˆå†å²ï¼‰
const bookDetail = await dataManager.getBookDetail(bookId);
```

#### æœç´¢å›¾ä¹¦
```javascript
// æœç´¢å›¾ä¹¦
const filters = {
    category: 'literature',
    page: 1,
    limit: 10
};
const result = await dataManager.searchBooks('JavaScript', filters);
```

#### è·å–å›¾ä¹¦åˆ†ç±»
```javascript
// è·å–æ‰€æœ‰åˆ†ç±»
const categories = await dataManager.getBookCategories();
```

### ğŸ›’ è´­ç‰©è½¦æ¨¡å—

#### è·å–è´­ç‰©è½¦
```javascript
// è·å–è´­ç‰©è½¦æ•°æ®
const cartData = await dataManager.getCartData();

// å¼ºåˆ¶åˆ·æ–°è´­ç‰©è½¦
const cartData = await dataManager.getCartData(true);
```

#### æ·»åŠ åˆ°è´­ç‰©è½¦
```javascript
// æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦
const result = await dataManager.addToCart(bookId, quantity);

// åœ¨HTMLä¸­ä½¿ç”¨ï¼ˆè‡ªåŠ¨ç»‘å®šï¼‰
<button class="add-to-cart-btn" data-book-id="123" data-quantity="1">
    åŠ å…¥è´­ç‰©è½¦
</button>
```

#### æ›´æ–°è´­ç‰©è½¦
```javascript
// æ›´æ–°å•†å“æ•°é‡
const result = await dataManager.updateCartItem(bookId, newQuantity);

// ç§»é™¤å•†å“
const result = await dataManager.removeFromCart(bookId);

// æ¸…ç©ºè´­ç‰©è½¦
const result = await dataManager.clearCart();
```

### ğŸ“¦ è®¢å•æ¨¡å—

#### åˆ›å»ºè®¢å•
```javascript
const orderData = {
    items: [
        { bookId: 1, quantity: 2 },
        { bookId: 2, quantity: 1 }
    ],
    shippingAddress: 'åŒ—äº¬å¸‚æœé˜³åŒºxxxè¡—é“xxxå·',
    paymentMethod: 'alipay'
};
const result = await dataManager.createOrder(orderData);
```

#### è·å–è®¢å•åˆ—è¡¨
```javascript
// è·å–è®¢å•åˆ—è¡¨
const params = {
    page: 1,
    limit: 10,
    status: 'paid'
};
const result = await dataManager.getOrders(params);
```

#### è·å–è®¢å•è¯¦æƒ…
```javascript
const orderDetail = await dataManager.getOrderDetail(orderId);
```

#### æ”¯ä»˜è®¢å•
```javascript
const result = await dataManager.payOrder(orderId, 'alipay');
```

### ğŸ“– æµè§ˆå†å²æ¨¡å—

#### è·å–æµè§ˆå†å²
```javascript
const history = await dataManager.getBrowsingHistory();
```

#### æ¸…ç©ºæµè§ˆå†å²
```javascript
const result = await dataManager.clearBrowsingHistory();
```

### ğŸ’¬ è®ºå›æ¨¡å—

#### è·å–å¸–å­åˆ—è¡¨
```javascript
const params = {
    category: 'review',
    page: 1,
    limit: 10
};
const result = await dataManager.getForumPosts(params);
```

#### å‘è¡¨å¸–å­
```javascript
const postData = {
    title: 'ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹è¯»åæ„Ÿ',
    content: 'è¿™æœ¬ä¹¦éå¸¸ä¸é”™...',
    category: 'review'
};
const result = await dataManager.createForumPost(postData);
```

#### å›å¤å¸–å­
```javascript
const result = await dataManager.replyToPost(postId, 'æˆ‘ä¹Ÿè§‰å¾—è¿™æœ¬ä¹¦å¾ˆå¥½ï¼');
```

### ğŸ¯ æ¨èæ¨¡å—

#### è·å–æ¨è
```javascript
// è·å–æ‰€æœ‰æ¨è
const recommendations = await dataManager.getRecommendations();

// è·å–ç‰¹å®šç±»å‹æ¨è
const browsingRecs = await dataManager.getRecommendations('browsing');
```

#### è®°å½•æ¨èç‚¹å‡»
```javascript
// ç”¨æˆ·ç‚¹å‡»æ¨èæ—¶è®°å½•
await dataManager.recordRecommendationClick(recommendationId);
```

## ğŸ”„ é¡µé¢è‡ªåŠ¨é€‚é…

ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«é¡µé¢ç±»å‹å¹¶è¿›è¡Œé€‚é…ï¼š

### æ”¯æŒçš„é¡µé¢ç±»å‹
- `login-page.html` - ç™»å½•é¡µé¢
- `register-page.html` - æ³¨å†Œé¡µé¢
- `change-password.html` - ä¿®æ”¹å¯†ç é¡µé¢
- `user-profile.html` - ç”¨æˆ·èµ„æ–™é¡µé¢
- `shopping-cart.html` - è´­ç‰©è½¦é¡µé¢
- `checkout.html` - ç»“è´¦é¡µé¢
- `order-history.html` - è®¢å•å†å²é¡µé¢
- `browsing-history.html` - æµè§ˆå†å²é¡µé¢
- `user-preferences.html` - ç”¨æˆ·åå¥½é¡µé¢

### é€šç”¨åŠŸèƒ½è‡ªåŠ¨ç»‘å®š
- ç”¨æˆ·èœå•æ˜¾ç¤º
- è´­ç‰©è½¦æ•°é‡æ˜¾ç¤º
- ç™»å‡ºåŠŸèƒ½
- æ·»åŠ åˆ°è´­ç‰©è½¦æŒ‰é’®

## ğŸ¨ UIç»„ä»¶

### åŠ è½½æŒ‡ç¤ºå™¨
```javascript
// æ˜¾ç¤ºå…¨å±€åŠ è½½
dataManager.showLoading('æ­£åœ¨å¤„ç†...');

// éšè—åŠ è½½
dataManager.hideLoading();
```

### æ¶ˆæ¯æç¤º
```javascript
// æ˜¾ç¤ºæ¶ˆæ¯
dataManager.showMessage('æ“ä½œæˆåŠŸï¼', 'success');
dataManager.showMessage('æ“ä½œå¤±è´¥ï¼', 'error');
dataManager.showMessage('æç¤ºä¿¡æ¯', 'info');
```

### åœ¨çº¿çŠ¶æ€æŒ‡ç¤º
ç³»ç»Ÿä¼šè‡ªåŠ¨æ˜¾ç¤ºç½‘ç»œè¿æ¥çŠ¶æ€ï¼Œæ— éœ€æ‰‹åŠ¨æ§åˆ¶ã€‚

## ğŸ”§ é«˜çº§é…ç½®

### è‡ªå®šä¹‰åˆ·æ–°é—´éš”
```javascript
// ä¿®æ”¹è‡ªåŠ¨åˆ·æ–°é—´éš”ï¼ˆé»˜è®¤30ç§’ï¼‰
dataManager.refreshInterval = 60000; // 60ç§’
```

### è‡ªå®šä¹‰é‡è¯•æ¬¡æ•°
```javascript
// ä¿®æ”¹APIè°ƒç”¨é‡è¯•æ¬¡æ•°ï¼ˆé»˜è®¤3æ¬¡ï¼‰
dataManager.retryCount = 5;
```

### ç›‘å¬æ•°æ®æ›´æ–°äº‹ä»¶
```javascript
// ç›‘å¬è´­ç‰©è½¦æ›´æ–°
window.addEventListener('cartUpdated', (e) => {
    console.log('è´­ç‰©è½¦æ›´æ–°:', e.detail);
});

// ç›‘å¬ç”¨æˆ·ä¿¡æ¯æ›´æ–°
window.addEventListener('userUpdated', (e) => {
    console.log('ç”¨æˆ·ä¿¡æ¯æ›´æ–°:', e.detail);
});
```

## ğŸ› é”™è¯¯å¤„ç†

### ç½‘ç»œé”™è¯¯
ç³»ç»Ÿä¼šè‡ªåŠ¨é‡è¯•å¤±è´¥çš„è¯·æ±‚ï¼Œå¹¶æ˜¾ç¤ºç›¸åº”çš„é”™è¯¯æç¤ºã€‚

### è®¤è¯é”™è¯¯
å½“Tokenè¿‡æœŸæˆ–æ— æ•ˆæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢ã€‚

### ç¦»çº¿å¤„ç†
ç³»ç»Ÿä¼šæ£€æµ‹ç½‘ç»œçŠ¶æ€ï¼Œåœ¨ç¦»çº¿æ—¶ä½¿ç”¨ç¼“å­˜æ•°æ®ã€‚

## ğŸ“± ç§»åŠ¨ç«¯é€‚é…

æ‰€æœ‰UIç»„ä»¶éƒ½æ”¯æŒå“åº”å¼è®¾è®¡ï¼Œåœ¨ç§»åŠ¨ç«¯ä¼šè‡ªåŠ¨è°ƒæ•´æ ·å¼ã€‚

## ğŸ”’ å®‰å…¨è€ƒè™‘

- æ‰€æœ‰APIè°ƒç”¨éƒ½ä¼šè‡ªåŠ¨æ·»åŠ è®¤è¯å¤´
- æ•æ„Ÿæ“ä½œä¼šè¿›è¡ŒäºŒæ¬¡ç¡®è®¤
- è‡ªåŠ¨å¤„ç†Tokenè¿‡æœŸæƒ…å†µ

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

- æ™ºèƒ½ç¼“å­˜æœºåˆ¶ï¼Œå‡å°‘é‡å¤è¯·æ±‚
- è‡ªåŠ¨æ‰¹é‡å¤„ç†ç›¸å…³è¯·æ±‚
- æ‡’åŠ è½½éå…³é”®æ•°æ®

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
2. åç«¯APIæ˜¯å¦æ­£å¸¸è¿è¡Œ
3. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

---
**ç‰ˆæœ¬**: v1.0  
**æ›´æ–°æ—¶é—´**: 2024-01-28
